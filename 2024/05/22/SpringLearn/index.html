<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SpringLearn | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Spring简介 Spring全家桶：spring，springmvc，spring boot，spring cloud Spring：出现在2002左右，解决企业开发的难度。减轻对项目模块之间的管理类和类之间的关系，帮助开发人员创建对象，管理对象之间的关系。 Spring核心技术：IOC AOP。能实现模块之间，类之间的解耦合。 依赖：classA中使用classB的属性或者方法，叫做class">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringLearn">
<meta property="og:url" content="http://example.com/2024/05/22/SpringLearn/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Spring简介 Spring全家桶：spring，springmvc，spring boot，spring cloud Spring：出现在2002左右，解决企业开发的难度。减轻对项目模块之间的管理类和类之间的关系，帮助开发人员创建对象，管理对象之间的关系。 Spring核心技术：IOC AOP。能实现模块之间，类之间的解耦合。 依赖：classA中使用classB的属性或者方法，叫做class">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-05-22T08:33:06.000Z">
<meta property="article:modified_time" content="2024-05-22T08:33:06.813Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/05/22/SpringLearn/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SpringLearn',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-05-22 16:33:06'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringLearn</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-05-22T08:33:06.813Z" title="Updated 2024-05-22 16:33:06">2024-05-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SpringLearn"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Spring简介"><a href="#Spring简介" class="headerlink" title="Spring简介"></a>Spring简介</h1><ul>
<li>Spring全家桶：spring，springmvc，spring boot，spring cloud</li>
<li>Spring：出现在2002左右，解决企业开发的难度。减轻对项目模块之间的管理类和类之间的关系，帮助开发人员创建对象，管理对象之间的关系。</li>
<li>Spring核心技术：IOC AOP。能实现模块之间，类之间的解耦合。</li>
<li>依赖：classA中使用classB的属性或者方法，叫做classA依赖classB</li>
<li>框架怎么学？<ul>
<li>知道框架可以做什么？mybatis——&gt;访问数据库，对表中的数据进行增删查改</li>
<li>框架的语法，框架要完成一个功能，需要一定的步骤支持。</li>
<li>框架内的实现原理。</li>
<li>通过学习实现一个框架</li>
<li>写框架，实现一个框架</li>
</ul>
</li>
</ul>
<h1 id="1-IOC-inverse-of-control"><a href="#1-IOC-inverse-of-control" class="headerlink" title="1 IOC(inverse of control)"></a>1 IOC(inverse of control)</h1><ul>
<li><p>把对象的创建，赋值，管理工作都交给代码外的容器实现的，也就是说对象的创建是由其他的外部资源来实现的。</p>
<ul>
<li><p>正转：有开发人员在代码中用new的方式创建对象</p>
</li>
<li><pre><code class="java">public static void main()&#123;
    Students stu = new Students(); //在代码中创建对象
    
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  + 反转：把原来开发人员管理的创建的对象的权限转交给代码之外的容器实现，由容器替代发发人员管理对象，创建对象，给对象赋值等工作。</span><br><span class="line"></span><br><span class="line">+ 容器：是一个服务器软件，一个框架(Spring)</span><br><span class="line"></span><br><span class="line">+ 为什么要使用IOC呢？</span><br><span class="line"></span><br><span class="line">  + 能够减少对代码的改动，也能实现不同的功能。 实现解耦合。</span><br><span class="line"></span><br><span class="line">+ java中创建对象有哪些方式？</span><br><span class="line"></span><br><span class="line">  + 构造方法 new students</span><br><span class="line">  + 反射 class.forname</span><br><span class="line">  + 序列化</span><br><span class="line">  + 克隆</span><br><span class="line">  + IOC 容器创建对象</span><br><span class="line">  + 动态代理</span><br><span class="line"></span><br><span class="line">+ IOC的一个体现：</span><br><span class="line"></span><br><span class="line">  + servlet 创建一个类继承Httpservlet</span><br><span class="line"></span><br><span class="line">  + 在web.xml注册servlet.</span><br><span class="line"></span><br><span class="line">    + ```xml</span><br><span class="line">      &lt;servlet&gt;</span><br><span class="line">          &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt;</span><br><span class="line">          &lt;servelt-class&gt;com.sea.Myservlet&lt;/servelt-class&gt;</span><br><span class="line">      &lt;/servlet&gt;</span><br><span class="line">      &lt;servlet-mapping&gt;</span><br><span class="line">          &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt;</span><br><span class="line">          &lt;url-parttern&gt;/welcome&lt;/url-parttern&gt;</span><br><span class="line">      &lt;/servlet-mapping&gt;</span><br><span class="line">      </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>.我们没有创建过servlet对象 没有 Myservlet servlet&#x3D; new Myservlet();</p>
<ul>
<li>为什么没有创建servlet为什么还能使用呢？<ul>
<li>是tomcat服务器创建的 tomcat也称为容器 放的是servlet对象 当然还有其他的 Listener Filter</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>IOC的技术实现</p>
<ul>
<li><p>主要是用到了DI(Dependency injection)，DI是IOC的技术实现</p>
</li>
<li><p>DI依赖注入</p>
</li>
<li><p>DI是指我们只需要在程序中提供要使用的对象的名称就可以了至于对象如何在容器中创建和赋值查找都有容器内部实现。</p>
</li>
</ul>
</li>
<li><p>Spring是使用的DI实现了IOC的功能，Spring底层创建对象使用的原理是反射机制。</p>
</li>
<li><p>实现步骤</p>
<ul>
<li>创建maven项目</li>
<li>加入maven依赖<ul>
<li>spring的依赖，版本5.2.5版本</li>
<li>junit依赖</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>创建类(接口和她的实现类)	<ul>
<li>和没有使用框架一样，就是普通的类</li>
</ul>
</li>
<li>创建spring需要使用的配置文件<ul>
<li>声明类的信息，这些类由spring创建和管理</li>
<li>通过spring的语法，完成属性的配置</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p>测试spring是否创建了对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--告诉spring创建对象</span></span><br><span class="line"><span class="comment">    声明bean 就是告诉spring要创建某个类的对象</span></span><br><span class="line"><span class="comment">    id：对象的自定义名称，唯一值。spring通过这个名称找到对象</span></span><br><span class="line"><span class="comment">    class：类的全路径名(不能是接口，因为spring创建对象是反射机制创建对象)</span></span><br><span class="line"><span class="comment">    spring就完成了 Someservice someService = new SomeserviceImpl()；</span></span><br><span class="line"><span class="comment">    spring会把创建好的对象放入到map中，</span></span><br><span class="line"><span class="comment">    springMap.(id值,对象);</span></span><br><span class="line"><span class="comment">    springMap.(&quot;someservices&quot;,new SomeserviceImpl());</span></span><br><span class="line"><span class="comment">    一个bean标签生成一个对象</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;someServices&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.sea.impl.SomeServicesImpl&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">spring配置文件</span></span><br><span class="line"><span class="comment">    1.beans：是根目录，spring把java对象成为bean。</span></span><br><span class="line"><span class="comment">    2.spring-beans.xsd是约束文件 和mybatis指定 dtd是一样的</span></span><br><span class="line"><span class="comment">--&gt;</span>        </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//使用spring容器创建对象</span></span><br><span class="line">    <span class="comment">//指定spring配置文件的名称</span></span><br><span class="line">    String config=<span class="string">&quot;beans.xml&quot;</span>;</span><br><span class="line">    <span class="comment">//2 创建表示spring容器的对象 ApplicationContext</span></span><br><span class="line">    <span class="comment">//Application就是spring存放对象的容器，通过容器获取对象了 他是一个接口</span></span><br><span class="line">    <span class="comment">//ClassPathXmlApplicationContext：表示从类路径中加载spring的配置文件</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(config);</span><br><span class="line">    <span class="comment">//从容器中要获取对象，要调用对象的方法</span></span><br><span class="line">    <span class="comment">//getbean(&quot;bean id&quot;)</span></span><br><span class="line">    <span class="type">SomeServices</span> <span class="variable">someServices</span> <span class="operator">=</span> (SomeServicesImpl)context.getBean(<span class="string">&quot;someServices&quot;</span>);</span><br><span class="line">    <span class="comment">//使用spring创建好的对象执行方法</span></span><br><span class="line">    someServices.dosome();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>三部曲：</p>
<ul>
<li>1 创建容器</li>
<li>2 使用getbean()，获取对象</li>
<li>3 调用方法执行功能</li>
</ul>
</li>
<li><p>通过给对象添加无参构造方法 可知对象实例实在ClassPathXmlApplicationContext()时创建的；</p>
</li>
<li><p>ClassPathXmlApplicationContext()执行时 会将xml中配置的所有bean一并初始化</p>
</li>
</ul>
</li>
</ul>
<h2 id="1-1-如何给java对象赋值"><a href="#1-1-如何给java对象赋值" class="headerlink" title="1.1 如何给java对象赋值"></a>1.1 如何给java对象赋值</h2><ul>
<li>两种配置方式<ul>
<li>1 xml文件配置</li>
<li>2 基于注解配置</li>
</ul>
</li>
<li>di语法分类<ul>
<li>set注入：spring调用类的set方法，在set方法可以实现属性的赋值</li>
<li>构造注入：spring调用类的有参方法，创建对象，在构造方法中实现赋值</li>
</ul>
</li>
</ul>
<h3 id="1-1-1-set注入"><a href="#1-1-1-set注入" class="headerlink" title="1.1.1 set注入"></a>1.1.1 set注入</h3><ul>
<li><pre><code class="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
    &lt;bean id=&quot;myApp&quot; class=&quot;com.sea.App&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;wanghaiyang&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;age&quot; value=&quot;23&quot;&gt;&lt;/property&gt;
    &lt;/bean&gt;
    &lt;!--需要特别注意的是当你的类中含有有参构造方法时 一定要写一个无参构造方法
    set注入中 类中需要有set方法 不然是会报错的--&gt;


    
&lt;/beans&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 非简单参数的注入</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;</span><br><span class="line">    &lt;bean id=&quot;myApp&quot; class=&quot;com.sea.App&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; value=&quot;wanghaiyang&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;age&quot; value=&quot;23&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;phone&quot; ref=&quot;phone&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;myDate&quot; class=&quot;java.util.Date&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;time&quot; value=&quot;123151564646&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;phone&quot; class=&quot;com.sea.Phone&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; value=&quot;apple15&quot;&gt;&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;IP&quot; value=&quot;156:98:154:2&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h3 id="1-1-2-构造注入"><a href="#1-1-2-构造注入" class="headerlink" title="1.1.2  构造注入"></a>1.1.2  构造注入</h3><p>示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;constructor-arg&gt;</span></span><br><span class="line"><span class="comment">      &lt;constructor-arg&gt;标签：一个&lt;constructor-arg&gt;标签表示一个构造方法的一个参数</span></span><br><span class="line"><span class="comment">      &lt;constructor-arg&gt;标签属性：</span></span><br><span class="line"><span class="comment">        name：表示构造方法的形参名</span></span><br><span class="line"><span class="comment">        index：表示构造方法的参数的位置(从左向右是0 1 2 3 ...)</span></span><br><span class="line"><span class="comment">        value：构造的形参类型是简单类型的可以使用</span></span><br><span class="line"><span class="comment">        ref：构造方法是一个引用类型的可以使用</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myApp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.sea.App&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;22&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lisi&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;phone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myDate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;java.util.Date&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;time&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123151564646&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.sea.Phone&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;IP&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123:123:123:5&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Apple_Maxpro&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意：写一个Constructor-arg就会调用有对应参数数目的构造器 所有一定把构造器需要的参数写全 不然会报错</p>
</li>
<li><p>引用参数的自动注入 </p>
</li>
<li><p>byname()</p>
</li>
<li><pre><code class="xml">       &lt;bean id=&quot;app&quot; class=&quot;com.sea.App&quot; autowire=&quot;byName&quot;&gt;
       &lt;property name=&quot;name&quot; value=&quot;lisi&quot;&gt;&lt;/property&gt;
       &lt;property name=&quot;age&quot; value=&quot;23&quot;&gt;&lt;/property&gt;
       &lt;!--&lt;property name=&quot;phone&quot; ref=&quot;phone&quot;&gt;&lt;/property&gt;--&gt;
       &lt;!--引用类型的自动注入 只对引用类型有效--&gt;
       &lt;!--使用的规则是byname，bytype--&gt;
       &lt;!--byname：java类中引用类型的属性名和spring容器中（配置文件）&lt;bean&gt;的id名称一样，且数据类型是一致的，这样的容器中的bean，spring能够赋值给引用类型
                   语法规则：&lt;bean&gt;标签里面加一个 autowire=&quot;byname&quot;--&gt;
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=&quot;phone&quot; class=&quot;com.sea.Phone&quot;&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;IP&quot; value=&quot;123:123:123:5&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;constructor-arg name=&quot;name&quot; value=&quot;Apple_Maxpro&quot;&gt;&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

+ bytype()

+ ```html
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
      &lt;bean id=&quot;app&quot; class=&quot;com.sea.App&quot; autowire=&quot;byType&quot;&gt;
          &lt;property name=&quot;name&quot; value=&quot;lisi&quot;&gt;&lt;/property&gt;
          &lt;property name=&quot;age&quot; value=&quot;23&quot;&gt;&lt;/property&gt;
          &lt;!--2.bytype
              java类中引用的数据类型和spring容器中bean的class属性是同源关系的，这样的bean能够赋值给引用关系(同类 父子 接口)
                          语法规则：&lt;bean&gt;标签里面加一个 autowire=&quot;byType&quot;--&gt;
  
  
      &lt;/bean&gt;
  
      &lt;bean id=&quot;phone&quot; class=&quot;com.sea.Phone&quot;&gt;
          &lt;constructor-arg name=&quot;IP&quot; value=&quot;123:123:123:5&quot;&gt;&lt;/constructor-arg&gt;
          &lt;constructor-arg name=&quot;name&quot; value=&quot;Apple_Maxpro&quot;&gt;&lt;/constructor-arg&gt;
      &lt;/bean&gt;
  
  &lt;/beans&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    + 自动注入如果有两个符合标准的bean则会出现异常(byType)</span><br><span class="line"></span><br><span class="line">## 补充：</span><br><span class="line"></span><br><span class="line">+ Junit单元测试 一个工具类库，做测试方法使用的。</span><br><span class="line">  + 单元：指定的是方法，一个类中有很多方法，一个方法称为单元</span><br><span class="line">  + 当然也可以使用一个main方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 2 配置文件</span><br><span class="line"></span><br><span class="line">+ 多配置文件优势</span><br><span class="line">  + 每一个文件比一个文件要小很多，效率高</span><br><span class="line">  + 避免多人带来的冲突</span><br><span class="line">+ 如果你的项目有多个模块(相关功能在一起) 一个模块配置一个文件。</span><br><span class="line">  + 学生考勤模块配置一个文件</span><br><span class="line">  + 学生成绩一个配置文件</span><br><span class="line">+ 多文件配置方式</span><br><span class="line">  + 按功能模块，一个模块一个配置文件</span><br><span class="line">  + 按照类的功能，数据库相关的配置一个配置文件，做事务的功能一个配置文件，做servlet功能的一个配置文件等</span><br><span class="line">+ 包含关系的配置文件</span><br><span class="line"></span><br><span class="line"># 3 注解</span><br><span class="line"></span><br><span class="line">+ 基于注解的DI:通过注解完成java对象的创建，属性赋值</span><br><span class="line">+ 注解的使用步骤</span><br><span class="line">  1. 使用注解必须使用spring-apo依赖</span><br><span class="line">  2. 在类中加入spring的注解(多个不同功能的注解)</span><br><span class="line">  3. 在spring的配置文件中，加入一个组件扫描标签，说明注解在你项目中的位置</span><br><span class="line">+ 学习的注解有以下这些</span><br><span class="line">  1. @component</span><br><span class="line">  2. @Respotory</span><br><span class="line">  3. @Service</span><br><span class="line">  4. @Controller</span><br><span class="line">  5. @value</span><br><span class="line">  6. @Autowired</span><br><span class="line">  7. @Resource</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* @component:创建对象，等同于&lt;bean&gt;的功能</span><br><span class="line">*   属性：value 就是对象的名称 也就是等同于bean的id</span><br><span class="line">*   value的值是唯一的</span><br><span class="line">* 位置：在类上</span><br><span class="line">* @Component(value=”myStudent“)等同于</span><br><span class="line">* &lt;bean id=&quot;myStudent&quot; class=&quot;com.sea.student&quot;/&gt;</span><br><span class="line">*</span><br><span class="line">* Spring中还有这样几个注释</span><br><span class="line">*   创建对象的注解</span><br><span class="line">*   1.@Repository（使用在持久层类的上面的）：放在dao的实现类上面，表示创建dao对象，dao对象是可以访问数据库的。</span><br><span class="line">*   2.@Service（放在业务层上面的）：放在service的实现类上面的，创建service对象，service对象是做业务处理，可以有事务处理等功能</span><br><span class="line">*   3.@Controller：放在控制器对象上面的，创建控制器对象的，能够提交用户的参数，显示请求的处理结果</span><br><span class="line">*   以上三个注解的使用和@component一样，都能创建对象，但是这三个注释还有额外的功能。</span><br><span class="line">* */</span><br><span class="line">//@Component(value = &quot;myStudent&quot;)</span><br><span class="line">@Component(value = &quot;myStudent&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student&#123;&quot; +</span><br><span class="line">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &quot;, age=&quot; + age +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span>                                                  <span class="attr">名称</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context  命名空间https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span>                                                   url</span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.ocean&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>注解的注入</p>
</li>
<li><p>简单类型的注解注入</p>
</li>
<li><pre><code class="java">package com.sea;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

/*
* @value:简单类型的属性赋值
*   属性：value是string 类型的，表示简单类型的属性值
*   位置：1 在属性定义的上面，无需set方法。推荐使用。
*        2 在set方法的上面
* */

@Component(&quot;myStudent&quot;)
public class Student &#123;
    @Value(&quot;seaOcean&quot;) //赋值
    private String name;
    @Value(&quot;23&quot;)	//赋值
    private int age;

    @Override
    public String toString() &#123;
        return &quot;Student&#123;&quot; +
                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +
                &quot;, age=&quot; + age +
                &#39;&#125;&#39;;
    &#125;
    @Value(&quot;seaOcean&quot;) //也可以
    public void setName(String name) &#123;
        this.name = name;
    &#125;
    @Value(&quot;23&quot;)//也可以
    public void setAge(int age) &#123;
        this.age = age;
    &#125;
    
&#125;

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 引用类型的注解赋值</span><br><span class="line">+ bytype</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">package com.sea;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component(&quot;mySchool&quot;)</span><br><span class="line">public class School &#123;</span><br><span class="line">    @Value(&quot;北京大学&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">    @Value(&quot;北京&quot;)</span><br><span class="line">    private String address;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;School&#123;&quot; +</span><br><span class="line">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &quot;, address=&#x27;&quot; + address + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------------------------------------------------------</span><br><span class="line">package com.sea;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* @value:简单类型的属性赋值</span><br><span class="line">*   属性：value是string 类型的，表示简单类型的属性值</span><br><span class="line">*   位置：1 在属性定义的上面，无需set方法。推荐使用。</span><br><span class="line">*        2 在set方法的上面</span><br><span class="line">* */</span><br><span class="line"></span><br><span class="line">@Component(&quot;myStudent&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">    //@Value(&quot;seaOcean&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">  //  @Value(&quot;23&quot;)</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    * 引用类型的赋值</span><br><span class="line">    * @Autowired：spring框架提供的注解，实现引用类的赋值</span><br><span class="line">    * spring中通过注解给引用类型赋值，使用的是自动注入原理</span><br><span class="line">    *</span><br><span class="line">    * 位置：</span><br><span class="line">    *     1 属性定义的上面，无需set方法</span><br><span class="line">    *     2 在set方法的上面</span><br><span class="line">    * */</span><br><span class="line">    @Autowired</span><br><span class="line">    private School school;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student&#123;&quot; +</span><br><span class="line">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="line">                &quot;, age=&quot; + age +</span><br><span class="line">                &quot;, school=&quot; + school +</span><br><span class="line">                &#x27;&#125;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;seaOcean&quot;)</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    @Value(&quot;23&quot;)</span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

+ byname

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">  <span class="meta">@Qualifier(&quot;mySchool&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> School school;</span><br></pre></td></tr></table></figure>

+ @resource：byname

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Resource(name = &quot;mySchool&quot;)</span><br><span class="line">private School school;</span><br></pre></td></tr></table></figure>

+ @resource：bytype

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Resource</span><br><span class="line">  private School school;</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
<li><p>注意：需要修改的可以使用配置文件</p>
</li>
<li><p>不经常修改的可以不用配置文件 使用注解的方式</p>
</li>
<li><p>${} </p>
<ul>
<li><p>需要在resource目录下创建一个properties文件  </p>
<ul>
<li><pre><code>myname=lisi
myage=23
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 在xml文件中配置properties文件</span><br><span class="line"></span><br><span class="line">  ```html</span><br><span class="line">  &lt;context:property-placeholder location=&quot;classpath:/Learn/test.properties&quot;/&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>在java文件的类中@Value注解中 如此使用@value(“${ myname}”) ;</p>
<ul>
<li><pre><code class="java">    @Value(&quot;$&#123;myname&#125;&quot;)
    public void setName(String name) &#123;
        this.name = name;
    &#125;
    //@Value(&quot;23&quot;)
    @Value(&quot;$&#123;myage&#125;&quot;)
    public void setAge(int age) &#123;
        this.age = age;
    &#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 4 AOP</span><br><span class="line"></span><br><span class="line">## 4.1 AOP和动态代理</span><br><span class="line"></span><br><span class="line">+ AOP(Aspect Orient Programming)面向切口编程,基于动态代理的技术，可以使jdk，cglib两种方式。</span><br><span class="line">+ AOP是动态代理的规范化，把动态代理的实现步骤，方式定义好了，让开发人员使用统一的方式，使用动态代理</span><br><span class="line">+ AOP(Aspect Orient Programming) </span><br><span class="line">+ 切面：给你的目标类增加的功能，就是切面，向上面用的日志，事务都是切面。</span><br><span class="line">  + 切面的特点：一般是非业务方法，独立使用的。</span><br><span class="line">+ 怎么理解面向切面编程？</span><br><span class="line">  + 需要在分析项目功能时，找出切面</span><br><span class="line">  + 合理的安排切面的执行（与目标方法的相对位置）</span><br><span class="line">  + 合理安排切面的执行位置，在哪个类，哪个方向增加功能</span><br><span class="line">+ 术语</span><br><span class="line">  + Aspect切面：表示增强的功能 通常是非业务功能：事务，日志，统计信息，参数检查，权限验证</span><br><span class="line">  + JoinPoint:连接点，链接业务方法和切面的位置，就某类中的业务方法</span><br><span class="line">  + pointcut：切入点，指多个连接方点的方法的集合，多个方法</span><br><span class="line">  + 目标对象：给哪个类的方法增强功能，这个类就是目标对象</span><br><span class="line">  + Advice：通知，通知表示切面功能执行的时间</span><br><span class="line">+ 一个切面的三个关键要素</span><br><span class="line">  + 切面的功能代码，切面干什么</span><br><span class="line">  + 切面的执行位置，使用Pointcut表示切面执行的位置</span><br><span class="line">  + 切面的执行时间，使用advice表示时间，在目标方法前还是目标方法后</span><br><span class="line"></span><br><span class="line">## 4.2  AOP的实现</span><br><span class="line"></span><br><span class="line">+ AOP是一个规范，是一个规范化的，标准的动态代理</span><br><span class="line"></span><br><span class="line">+ AOP的技术实现框架</span><br><span class="line"></span><br><span class="line">  1. spring：spring在内部实现了AOP的规范，能做AOP的工作。</span><br><span class="line"></span><br><span class="line">     1. spring主要在事务处理中使用了AOP</span><br><span class="line">     2. 在项目开发中很少使用spring的AOP实现，因为spring的AOP比较笨重。</span><br><span class="line"></span><br><span class="line">  2. aspectJ：一个开源的专门做AOP的框架。 spring框架中已经集成了aspectJ框架，通过spring就能使用aspectJ的功能</span><br><span class="line"></span><br><span class="line">     1. 来自于eclipse基金会支持成立的</span><br><span class="line">     2. 实现AOP有两种方法</span><br><span class="line">        1. 一种是xml配置文件的方式 ：配置全局事务 （事务）</span><br><span class="line">        2. 一种是使用注解的方式</span><br><span class="line">           1. 一般都是使用注解的</span><br><span class="line">              1. 一共有五个注解这五个表示界面的切入时间</span><br><span class="line"></span><br><span class="line">  3. 学习aspectJ的相关语法</span><br><span class="line"></span><br><span class="line">     1. 切面的执行时间，这个执行时间在规范中叫做advice(通知，增强)</span><br><span class="line"></span><br><span class="line">        在aspectJ中是使用注解来表示的.也可以在xml配置文件中使用标签</span><br><span class="line"></span><br><span class="line">        (1) @Before</span><br><span class="line"></span><br><span class="line">        (2) @afterReturning</span><br><span class="line"></span><br><span class="line">        (3) @Around</span><br><span class="line"></span><br><span class="line">        (4) @AfterThrowing</span><br><span class="line"></span><br><span class="line">        (5) @After</span><br><span class="line"></span><br><span class="line">## 4.3 切入点表达式</span><br><span class="line"></span><br><span class="line">1. 表示切面执行的位置，使用的是接入点表达式。</span><br><span class="line"></span><br><span class="line">   execution(modifies-pattern? ret-type-pattern</span><br><span class="line"></span><br><span class="line">   declaring-type-pattern?name-pattern(param-pattern)</span><br><span class="line"></span><br><span class="line">   throws-pattern?)</span><br><span class="line"></span><br><span class="line">   + 类型 返回 路径 方法&amp;参数 异常 </span><br><span class="line">     +  </span><br><span class="line"></span><br><span class="line">   + 下面是最重要的两个</span><br><span class="line"></span><br><span class="line">   -------------------------------------</span><br><span class="line"></span><br><span class="line">   ret-type-pattern</span><br><span class="line"></span><br><span class="line">   name-pattern(param-pattern)</span><br><span class="line"></span><br><span class="line">   ----------------------------------------------</span><br><span class="line"></span><br><span class="line">   + /* 表示 0到多个任意字符</span><br><span class="line">   + .. 用在包名中表示当前包及其子类 用在方法参数中，表示任意多个参数</span><br><span class="line"></span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">## 4.4 IDEA中是使用AOP</span><br><span class="line"></span><br><span class="line">1. 新建maven项目</span><br><span class="line"></span><br><span class="line">2. 加入依赖</span><br><span class="line"></span><br><span class="line">   1. spring依赖</span><br><span class="line">   2. junit依赖</span><br><span class="line">   3. sapectJ依赖</span><br><span class="line"></span><br><span class="line">3. 创建目标类：接口和他的实现类。</span><br><span class="line"></span><br><span class="line">   要做的是给类中的方法添加功能</span><br><span class="line"></span><br><span class="line">4. 创建切面类：普通类</span><br><span class="line"></span><br><span class="line">   1. 在类的定义方法，方法就是切面的功能代码</span><br><span class="line"></span><br><span class="line">      在方法的上面加入aspectJ中的通知注解，例如@Before</span><br><span class="line">      有需要指定的切入点表达式execution()</span><br><span class="line"></span><br><span class="line">5. 创建spring的配置文件：声明对象，把对象交给容器统一管理</span><br><span class="line"></span><br><span class="line">   声明对象你可以使用注解或者xml文件&lt;bean&gt;</span><br><span class="line"></span><br><span class="line">   1. 声明目标类</span><br><span class="line"></span><br><span class="line">   2. 沈明切面类对象</span><br><span class="line"></span><br><span class="line">   3. 声明aspectj框架中的自动代理生成器标签。</span><br><span class="line"></span><br><span class="line">      自动代理的生成器：用来完成代理对象的自动创建功能的</span><br><span class="line"></span><br><span class="line">6. 创建测试类，冲spring容器中获取目标对象(实际就是代理的对象)</span><br><span class="line"></span><br><span class="line">   通过代理的执行方法，实现aop的功能增强</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;ApplicationContextProxy.xml&quot;);</span><br><span class="line">        //冲容器中获取目标对象</span><br><span class="line">        myService service =(myService) context.getBean(&quot;service&quot;); //两个全部写接口 都是接口的实现 tnnd 找了半天</span><br><span class="line">        //通过代理对象执行方法，实现目标方法执行时，增强的功能。</span><br><span class="line">        service.dosomething(23,&quot;hello&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>总结：</p>
<ul>
<li><p>加依赖</p>
</li>
<li><p>目标类和接口</p>
</li>
<li><p>切面类</p>
</li>
<li><pre><code class="java">package com.annot_6;

import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

/*
* @Aspect是框架中的注解
*   作用:表示当前类是切面类
*   切面类：是用来给业务方法添加功能的类
*   位置：在类的上面
* */
@Aspect
public class myAspect &#123;
    @After(value=&quot;mypt()&quot;)
    public void myFinallyNotice()&#123;
        System.out.println(&quot;==========Delete Resource============&quot;);
    &#125;
    @Before(value=&quot;mypt()&quot;)
    public void myAfter()&#123;
        System.out.println(&quot;==========Service Start============&quot;);
    &#125;
    @Pointcut(value = &quot;execution(* *..*Impl.doThird(..))&quot;)
    private void mypt()&#123;

    &#125;

&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 配置目标类和切面类</span><br><span class="line"></span><br><span class="line">+ ```xml</span><br><span class="line">  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">  &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">         http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">         http://www.springframework.org/schema/aop</span><br><span class="line">         https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;!--把对象交给spring容器--&gt;</span><br><span class="line">      &lt;!--申明目标对象--&gt;</span><br><span class="line">      &lt;bean id=&quot;service&quot; class=&quot;com.annot_1.myServiceImpl&quot; /&gt;</span><br><span class="line">      &lt;!--申明切面类对象--&gt;</span><br><span class="line">      &lt;bean id=&quot;myAspect&quot; class=&quot;com.annot_1.myAspect&quot; /&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;!--申明自动代理生成器 使用aspectJ框架的内部功能，创建目标对象的代理对象</span><br><span class="line">      创建代理对象是内存中实现的，修改目标对象的内存中的结构。创建为代理对象</span><br><span class="line">      所以目标对象就是被修改后的代理对象</span><br><span class="line">      aspectj-autoproxy：会把spring容器中所有的目标对象，一次性全部生产代理对象。</span><br><span class="line">      --&gt;</span><br><span class="line">      &lt;aop:aspectj-autoproxy /&gt;</span><br><span class="line">      &lt;!--spring会自动当我们添加环境 就在第4行 和7 8行--&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>AOP的实现框架</p>
<ul>
<li>spring实现了AOP使用的是接口</li>
<li>aspectJ框架使用注解和配置文件都可以实现AOP功能</li>
</ul>
</li>
</ul>
<h2 id="4-5-前置通知"><a href="#4-5-前置通知" class="headerlink" title="4.5 前置通知"></a>4.5 前置通知</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 定义方法的要求</span></span><br><span class="line"><span class="comment">    * public 公共方法</span></span><br><span class="line"><span class="comment">    * 方法没有返回值</span></span><br><span class="line"><span class="comment">    * 方法的名称自定义</span></span><br><span class="line"><span class="comment">    * 方法可以有参数，可以没有参数</span></span><br><span class="line"><span class="comment">    *   如果有参数 这个参数不是自定义的 有几个参数类型可以使用</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * @Before:前置通知</span></span><br><span class="line"><span class="comment">    *   属性value，是切面表达式，表示切面的功能执行位置。</span></span><br><span class="line"><span class="comment">    *   位置：方法上方</span></span><br><span class="line"><span class="comment">    * 特点：</span></span><br><span class="line"><span class="comment">    *   在目标方法之前执行的</span></span><br><span class="line"><span class="comment">    *   不会改变执行结果</span></span><br><span class="line"><span class="comment">    *   不会影响方法执行</span></span><br><span class="line"><span class="comment">    * */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(value = &quot;execution(void *..dosomething(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myBefore</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;current_time:&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-6-后置通知"><a href="#4-6-后置通知" class="headerlink" title="4.6 后置通知"></a>4.6 后置通知</h2><ul>
<li><p>@AfterRetueing(value&#x3D;”execution(* * <em>..</em>(..))”  returning&#x3D;”ret”)</p>
</li>
<li><p>Joinpoint如何使用</p>
<ul>
<li><p>说明使用的语法</p>
<ul>
<li><p>注意一定要将接入点对象放在第一位</p>
</li>
<li><pre><code class="java">* @AfterReturning：后置通知
* 属性一：value 切入点表达式
*    二：returning自定义的变量，表示目标方法的返回值的。
        自定义的变量名必须和通知方法的形参名一样
*  位置：在方法上定义
*  特点
* 1.在目标方法之后执行的
* 2.能够获取到目标方法的返回值，可以根据这个返回值做不同的处理功能
* 3.可以修改这个返回值
*
* 后置通知的执行顺序
*   Object res = doOther();
*   myAfterReturing(res);
*   System.out.println(&quot;res=&quot;+res)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ ```java</span><br><span class="line">  @AfterReturning(value=&quot;execution(* *..doOther(..))&quot;,</span><br><span class="line">      returning = &quot;res&quot;)</span><br><span class="line">      public void myAfterReturning(JoinPoint jp,Object res)&#123;</span><br><span class="line">          System.out.println(&quot;后置通知：方法的定义&quot;+jp.getSignature());</span><br><span class="line">          String res1 = (String) res;</span><br><span class="line">          String s = res1.toLowerCase();</span><br><span class="line">          System.out.println(s);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-7-环绕通知"><a href="#4-7-环绕通知" class="headerlink" title="4.7 环绕通知"></a>4.7 环绕通知</h2><ul>
<li><pre><code class="java">package com.annot_3;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

import java.util.Date;

/*
* @Aspect是框架中的注解
*   作用:表示当前类是切面类
*   切面类：是用来给业务方法添加功能的类
*   位置：在类的上面
* */
@Aspect
public class myAspect &#123;
 /*
 * 环绕通知方法的定义格式
 *  1.public
 *  2.必须有一个返回值
 *  3.方法名称自定义
 *  4.方法有参数，固定的参数
 * */
    /*
    * @Around:环绕通知
    *   属性：value 切入点表达式
    *   位置：在方法的定义上面
    * 特点：
    *   1.他是最强力的通知
    *   2.在我们的目标方法的前和后都能增强功能
    *   3.能控制目标方法是否被调用执行
    *   4.修改原来的目标方法的执行结果，影响最后的结果
    *
    * 环绕通知等同于jdk动态代理的，Invocationhandler接口
    *
    * 参数：proceedingJointPoint等同于 Method
    * 作用：执行目标方法的
    * 返回值：就是目标方法的执行结果，可以修改。
    *
    * */
    @Around(value = &quot;execution(* *..myServiceImpl.doFirst(String,Integer))&quot;)
    public Object myAround(ProceedingJoinPoint pjp) throws Throwable &#123;
        //1实现环绕通知
        System.out.println(&quot;ahead&quot;);
        Object proceed = null;
        proceed = pjp.proceed()+&quot; hello!&quot;;
        //2在目标方法前或在目标方法后加入功能
        System.out.println(&quot;rear&quot;);
        return proceed;
    &#125;


&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 4.8 异常通知</span><br><span class="line"></span><br><span class="line">+ 异常通知方法的定义格式</span><br><span class="line">  + public</span><br><span class="line">  + 没有返回值</span><br><span class="line">  + 方法名称自定义</span><br><span class="line">  + 方法有一个异常，如果还有就是JoinPoint</span><br><span class="line">+ @AfterThrowing：异常通知</span><br><span class="line">  + 属性</span><br><span class="line">    + value 切入点表达式</span><br><span class="line">    + throwing 自定义变量，表示目标方法抛出的异常对象</span><br><span class="line">      + 变量名必须和参数名一样</span><br><span class="line">  + 特点</span><br><span class="line">    + 在目标方法抛出异常是执行</span><br><span class="line">    + 可以做异常的监控目标方法执行时是不是有异常</span><br><span class="line">    + 如果有异常，可以发送邮件，短信进行通知</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@Aspect</span><br><span class="line">public class myAspect &#123;</span><br><span class="line"></span><br><span class="line">@AfterThrowing(value = &quot;execution(public void com.annot_4.myServiceImpl.doSecond(..))&quot;,throwing = &quot;ex&quot;)</span><br><span class="line"> public void myAfterThrowing(Exception ex)&#123;</span><br><span class="line">    System.out.println(&quot;===========Discover Exception==============&quot;);</span><br><span class="line">    System.out.println(ex.getStackTrace());</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h2 id="4-9-最终通知"><a href="#4-9-最终通知" class="headerlink" title="4.9 最终通知"></a>4.9 最终通知</h2><ul>
<li>最终通知方法的定义格式<ul>
<li>public</li>
<li>没有返回值</li>
<li>方法名称自定义</li>
<li>没有参数，如果有就是JoinPoint</li>
</ul>
</li>
<li>@After：最终通知<ul>
<li>属性<ul>
<li>value 切入点表达式</li>
</ul>
</li>
<li>特点<ul>
<li>总是会执行</li>
<li>在目标方法之后执行</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myAspect</span> &#123;</span><br><span class="line"><span class="meta">@After(value=&quot;execution(* *..*Impl.doThird(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myFinallyNotice</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;==========Delete Resource============&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">        目标方法</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    	myFinallyNotice()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>以这种意思在里面 所以一般用于关闭资源</li>
</ul>
<h2 id="4-10-Pointcut"><a href="#4-10-Pointcut" class="headerlink" title="4.10 @Pointcut"></a>4.10 @Pointcut</h2><ul>
<li>这个注解是用于定义和管理切入点的，如果你的项目中有多个切入点表达式是重复的，可以复用的，可以使用pointcut</li>
<li>属性<ul>
<li>value 切入点表达式</li>
<li>加在方法上方</li>
</ul>
</li>
<li>特点<ul>
<li>当使用@Pointcut定义在一个方法的上面，此时这个方法的名称就是切入点表达式的别名。其他的通知中，value属性就可以使用这个方法的名称来代替切入点表达式了</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myAspect</span> &#123;</span><br><span class="line">    <span class="meta">@After(value=&quot;mypt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myFinallyNotice</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;==========Delete Resource============&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Before(value=&quot;mypt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myAfter</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;==========Service Start============&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Pointcut(value = &quot;execution(* *..*Impl.doThird(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mypt</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>不同形式下的不同代理</p>
<ul>
<li>目标类实现接口的时候使用的是jdk的动态代理</li>
<li>目标类没有实现了接口使用的是CGLIB动态代理</li>
</ul>
</li>
<li><p>如何在有接口的情况下还是用CGLIB代理？</p>
<ul>
<li><p>需要修改配置文件</p>
</li>
<li><pre><code class="html">&lt;!--如果你希望目标类有接口使用CGLIB代理的话--&gt;
&lt;!--proxy-target-class=&quot;true&quot; 告诉框架cglib代理--&gt;
&lt;aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"># 5 关于spring和mybatis的使用</span><br><span class="line"></span><br><span class="line">+ 把spring和mybatis集成到一起，像一个框架一样使用。</span><br><span class="line"></span><br><span class="line">  + 使用的技术是IOC</span><br><span class="line"></span><br><span class="line">+ 为什么IOC可以将mybatis和spring整合起来呢？</span><br><span class="line"></span><br><span class="line">  + 以为IOC能够创建对象，可以将mybatis框架中的对象交给spring统一创建，开发人员从spring中获取对象。</span><br><span class="line">  + 开发人员就不需要同时面对两个框架了，就面对一个spring就行了</span><br><span class="line"></span><br><span class="line">+ mybatis使用步骤，对象</span><br><span class="line"></span><br><span class="line">  + 定义接口，studentsDAO</span><br><span class="line">  + 定义mapper文件，studentsDAO.xml</span><br><span class="line">  + 创建DAO的代理对象 StudentsDAO dao = sqlsession.getMapper(StudentsDAO.class);</span><br><span class="line">  + List&lt;students&gt; list = dao.selectStudents();</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">+ 要使用DAO对象，需要使用getmapper()方法：</span><br><span class="line"></span><br><span class="line">  + 怎么获取getmapper()方法</span><br><span class="line">    + 获取SqlSession对象，需要使用sqlsessionfactory的对象openSession()方法</span><br><span class="line">    + 创建sqlsessionfactory对象。通过读取mybatis的主配置文件，能够创建sqlsessionfactory对象</span><br><span class="line">  + 需要使用sqlsessionfactory对象，使用factory能获取sqlsession</span><br><span class="line">  + factory的创建需要读取主配置文件</span><br><span class="line"></span><br><span class="line">+ 主配置文件</span><br><span class="line"></span><br><span class="line">  + 环境信息 不再使用原先的连接池 使用更高级的连接池 这个连接池交给spring来创建</span><br><span class="line">  + mapper位置</span><br><span class="line">  + 日志设置</span><br><span class="line"></span><br><span class="line">  ===============</span><br><span class="line"></span><br><span class="line">+ 通过以上的说明 spring需要创建以上的对象</span><br><span class="line"></span><br><span class="line">  1. 独立的连接池的对象，使用阿里巴巴的德鲁伊连接池</span><br><span class="line">  2. sqlsessionfactory对象</span><br><span class="line">  3. 创建DAO对象</span><br><span class="line"></span><br><span class="line">+ 创建出spring需要对象就可以使用spring和mybatis整合起来使用</span><br><span class="line"></span><br><span class="line">+ 步骤：</span><br><span class="line"></span><br><span class="line">  1. 新建maven项目</span><br><span class="line">  2. 加入maven的依赖</span><br><span class="line">     1. spring的依赖</span><br><span class="line">     2. mybatis的依赖</span><br><span class="line">     3. mysql的驱动</span><br><span class="line">     4. spring的事务管理的依赖</span><br><span class="line">     5. mybatis和spring集成的依赖：mybatis官方提供的，用来在spring项目中创建mybatis中的sqlsessionfactroy，DAO对象</span><br><span class="line">  3. 创建实体类</span><br><span class="line">  4. 创建接口和mapper文件</span><br><span class="line">  5. 创建主配置文件</span><br><span class="line">  6. 创建service接口和实现类，属性是dao</span><br><span class="line">  7. 创建spring的配置文件：声明mybatis的对象交给spring创建</span><br><span class="line">     1. 数据源</span><br><span class="line">     2. sqlsessionfactory</span><br><span class="line">     3. DAO对象</span><br><span class="line">     4. 声明自定义的servce</span><br><span class="line"></span><br><span class="line">  ```xml</span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;4.11&lt;/version&gt;</span><br><span class="line">      &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;3.5.9&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;8.0.28&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;druid&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;1.1.12&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.3.1&lt;/version&gt;</span><br><span class="line">      &lt;/dependency&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/util https://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:properties</span> <span class="attr">location</span>=<span class="string">&quot;baseinf.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_url&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_user&#125;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_password&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;filters&quot;</span> <span class="attr">value</span>=<span class="string">&quot;stat&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;6000&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;60000&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300000&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testWhileIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnBorrow&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnReturn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolPreparedStatements&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxOpenPreparedStatements&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;asyncInit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>由于我们不再使用POOLED所以我们使用配置bean的方式使用德鲁伊(druid)连接池</p>
</li>
<li><p>mybatis的配置文件</p>
</li>
<li><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
    &lt;settings&gt;
        &lt;!--设置，ybatis输出日志--&gt;
        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;
    &lt;/settings&gt;
    &lt;!--&lt;typeAliases&gt;
        &lt;package name=&quot;com.sea&quot;/&gt;
    &lt;/typeAliases&gt;--&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;com/sea/DAO/studentsDAO.xml&quot;/&gt;
        &lt;!--&lt;package name=&quot;com.sea.DAO&quot;/&gt;--&gt;
    &lt;/mappers&gt;

&lt;/configuration&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ applicationcontext 里面包含  数据源、factory和DAO</span><br><span class="line"></span><br><span class="line">+ ```xml</span><br><span class="line">  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">  &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">         http://www.springframework.org/schema/util https://www.springframework.org/schema/util/spring-util.xsd&quot;&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;bean id=&quot;dataSource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot; init-method=&quot;init&quot; destroy-method=&quot;close&quot;&gt;</span><br><span class="line">          &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybase?serverTimezone=GMT&quot;/&gt;</span><br><span class="line">          &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">          &lt;property name=&quot;password&quot; value=&quot;why123456&quot;/&gt;</span><br><span class="line">          &lt;property name=&quot;maxActive&quot; value=&quot;20&quot;/&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">      &lt;bean id=&quot;SqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class="line">          &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-main.xml&quot;/&gt;</span><br><span class="line">          &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">       &lt;!--创建DAO对象，使用Sqlsession的getMapper(Students.class)--&gt;</span><br><span class="line">      &lt;!--来自于官方提供的 住主要作用是在内部调用getMapper()生成每个DAO接口的代理对象--&gt;</span><br><span class="line">      &lt;!--dao对象的默认名称是接口名首字母小写--&gt;</span><br><span class="line">      &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class="line">          &lt;!--指明sqlSessionFactoryBeanName--&gt;</span><br><span class="line">          &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;SqlSessionFactory&quot;/&gt;</span><br><span class="line">          &lt;!--指定一个包名，包名是DAO接口所在的包名,会扫描所有的接口 把每个接口都执行一次 getmapper()方法 得到每个接口的DAO对象 创建好的DAO对象会放的spring的容器中--&gt;</span><br><span class="line">          &lt;property name=&quot;basePackage&quot; value=&quot;com.sea.DAO&quot;/&gt;</span><br><span class="line">      &lt;/bean&gt;</span><br><span class="line">  &lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>jdbc.properties</p>
</li>
<li><pre><code class="properties">jdbc.url=jdbc:mysql://localhost:3306/mybase?serverTimezone=GMT
jdbc.username=root
jdbc.password=why123456
jdbc.maxActive=20                         //前面不加jbdc的话 username会和windows系统变量发生冲突
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 6 事务</span><br><span class="line"></span><br><span class="line">+ 使用事务的情况</span><br><span class="line"></span><br><span class="line">  + 当我的操作涉及到多个表或者是多个sql语句的delect update insert 我们需要保证这些语句全部成功才能完成</span><br><span class="line">  + 或者全部失败才能保证操作是真确的</span><br><span class="line">    + 例如：从A账户向B账户中汇款 A的减和B的加要同时成立</span><br><span class="line"></span><br><span class="line">+ 在java的代码中应该如何使用事务呢？</span><br><span class="line"></span><br><span class="line">  + DAO是sql语句的java代表 其中的函数是是sql语句的换回结果 DAO.xml文件记录了sql语句</span><br><span class="line">  + 放在了service的业务方法中 因为service中会有多个DAO方法，执行多个sql语句</span><br><span class="line"></span><br><span class="line">+ 不同方式的事务操作</span><br><span class="line"></span><br><span class="line">  + JBDC代码中处理事务需要使用Connection需要提交事务需要conn.commit 回滚事务需要conn.rollback</span><br><span class="line">  + mybatis访问数据库，处理事务sqlsession.commit 和 sqlsession.rollback()</span><br><span class="line"></span><br><span class="line">+ spring提供了一种处理事务处理的同i模型，能够使用统一的步骤，方式完成多种不同数据库访问技术的事务处理。</span><br><span class="line"></span><br><span class="line">  + 使用spring的事务处理机制，可以完成mybatis和hibernate的数据库事务处理</span><br><span class="line"></span><br><span class="line">+ 申明式事务：</span><br><span class="line"></span><br><span class="line">  1. 事务内部提交，回滚事务，使用事务管理器的对象，代替完成commit rollback</span><br><span class="line"></span><br><span class="line">     事务管理器时一个接口和一套(很多)实现类组成了事务管理器</span><br><span class="line"></span><br><span class="line">     + 接口：platformTransactionManger，定义了事务的重要方法commit rollback</span><br><span class="line"></span><br><span class="line">     + 实现类：spring把每种数据库访问技术的事务处理类创建好了</span><br><span class="line"></span><br><span class="line">     如何使用：需要告知spring你要是用的是那种访问技术</span><br><span class="line"></span><br><span class="line">     需要声明数据库技术对于事务管理器的实现类，在spring的配置文件中使用&lt;bean&gt;声明</span><br><span class="line"></span><br><span class="line">     ```xml</span><br><span class="line">     &lt;bean id=&quot;xxx&quot; class=&quot;*..DataSourceTransactionManager&quot;/&gt;</span><br></pre></td></tr></table></figure>

2. 你的业务需要什么样的事务呢？

   说明方法需要的事务

    1. 事务的隔离级别

       DEFAULT

       READ_UNCOMMITTED

       REPEATABLE_READ

       SERICALABLE

       2. 事务的超时时间：表示一个方法最长的执行时间，如果方法执行超过了时间，事务就会回滚。

       单位是秒，整数值，默认是-1

       3. 事务的传播行为 

       传播行为是用来控制你的方法是不是有事务，是什么样的事务

       事务在方法之间是如何使用的 就是事务行为

       全波行为有7种

       + 最重要的是1

               1.  PROPAGETION_REQUIRE 	

                   最常见的事	务传播行为 也是默认的传播方式 一定会在事务中执行 如果已有就用 没有就自己创建

               2. PROPAGETION_REQUIRE_NEW

                   总是信件事务，若当前存在事务，就挂起事务，知道新事务执行完成。

               3. PROPAGETION_SUPPORTS

                   查询操作 有无事务均可

       4. 提交事务的时机

          1. 当你的事务方法，执行成功，没有异常抛出，当方法执行完毕，spring在方法执行后提交事务。事务管理器commit

          2. 当你的业务方法抛出异常或者error时，spring执行回滚，调用事务管理器的rollback

          3. 当你的业务方法抛出非运行时异常，主要是受到查异常时，提交事务

             受查异常：在你写代码中，必须进行异常的捕捉

       总结spring的事务：

            1. 管理事务的时事务管理和它的实现类
               2. spring的事务是一个统一的模型
                 1. 指定使用的事务管理器实现类，使用&lt;bean&gt;
                 2. 指定那些类，哪些方法需要加入事务的功能
                 3. 指定方法需要事务需要的隔离级别，转播行为，超时
</code></pre>
</li>
</ul>
<h1 id="6-程序举例环境搭建"><a href="#6-程序举例环境搭建" class="headerlink" title="6. 程序举例环境搭建"></a>6. 程序举例环境搭建</h1><h2 id="6-1-基本处理方式"><a href="#6-1-基本处理方式" class="headerlink" title="6.1 基本处理方式"></a>6.1 基本处理方式</h2><p>举例：购买商品trans_sale项目<br>本例要实现购买商品，模拟用户下单，向订单表添加销售记录，从商品表减少库存。</p>
<p>实现步骤：</p>
<p>创建两个数据库表 sale,goods<br>sale 销售表<br>goods 商品表</p>
<ul>
<li><p>如何给我们已经写好的函数添加事务呢？(有两种方案)</p>
<ul>
<li><p>注解方案 spring框架自己用AOP实现给业务方法增加事务功能的，使用@Transactional注解增加事务</p>
<ul>
<li>这个书解是spring提供的放在public方法的上面，表示当前方法的具有事务</li>
<li>可以给注解的属性赋值，表示具体的隔离级别，传播行为，异常信息等</li>
<li>propagation：用于设置事务的传播属性</li>
<li>isolate：用于设置事务的隔离级别</li>
<li>readonly：用于设置对数据的操作是不是只读的</li>
<li>timeout：用于设置操作与数据库连接的超时限制</li>
<li>rollbackFor：指定需要回滚的异常类</li>
<li>rollbackForClassName：指定需要回滚的异常类的类名</li>
<li>noRollbackFor：不需要回滚的异常类</li>
<li>noRollbackForClassName：指定不需要回滚的异常类的类名</li>
</ul>
</li>
<li><p>不管是那种事务一定需要事务管理器</p>
<ul>
<li><p>需要声明事务管理器对象</p>
<ol>
<li><bean id="xx" class="datasourceTransactionManager">
</li>
<li><p>开启事务注解驱动，告诉spring框架，要使用注解的方式管理事务。</p>
<p>spring使用AOP机制，创建@Transactional所在的类的代理对象，给方法加入事务的功能。</p>
<p>spring给业务方法加入事务：</p>
<p>​	在你的业务方法执行之前先开启事务，在业务方法之后提交或回滚事务，使用AOP的环绕通知</p>
<p>Around环绕通知自己不用写了，spring内部已经实现了</p>
<p>@Around(“你需要添加事务功能的业务方法的切入点表达式”)</p>
<p>Object myAround(){</p>
<p>​	try{</p>
<p>​		buy(1001,10);</p>
<p>​		spring的事务管理.commit();</p>
<p>​	}catch(Exception e){</p>
<p>​		spring的事务管理.rollback</p>
<p>​	}</p>
<p>}</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sea.Service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sea.Contain.Goods;</span><br><span class="line"><span class="keyword">import</span> com.sea.Contain.Sale;</span><br><span class="line"><span class="keyword">import</span> com.sea.DAO.GoodsDAO;</span><br><span class="line"><span class="keyword">import</span> com.sea.DAO.SaleDAO;</span><br><span class="line"><span class="keyword">import</span> com.sea.Exception.NotEnoughtExcep;</span><br><span class="line"><span class="keyword">import</span> com.sea.Service.ByGoodService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ByGoodServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ByGoodService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SaleDAO saledao;</span><br><span class="line">    <span class="keyword">private</span> GoodsDAO goodsdao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSaledao</span><span class="params">(SaleDAO saledao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.saledao = saledao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGoodsdao</span><span class="params">(GoodsDAO goodsdao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.goodsdao = goodsdao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">(Integer goodsid, Integer nums)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============start============&quot;</span>);</span><br><span class="line">        <span class="type">Sale</span> <span class="variable">sale</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sale</span>();</span><br><span class="line">        sale.setGoodsid(goodsid);</span><br><span class="line">        sale.setNums(nums);</span><br><span class="line">        saledao.insertSaleRecord(sale);</span><br><span class="line">        <span class="comment">//更新库存</span></span><br><span class="line">        <span class="type">Goods</span> <span class="variable">goods</span> <span class="operator">=</span> goodsdao.selectGoodsById(goodsid);</span><br><span class="line">        <span class="keyword">if</span>(goods == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//没有</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NotEnoughtExcep</span>(<span class="string">&quot;编号是为&quot;</span>+goodsid+<span class="string">&quot;的商品已售空！&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(goods.getAmount() &lt; nums)&#123;</span><br><span class="line">            <span class="comment">//商品不足够</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NotEnoughtExcep</span>(<span class="string">&quot;商品不足！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//修改库存了</span></span><br><span class="line">        <span class="type">Goods</span> <span class="variable">buygoods</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Goods</span>();</span><br><span class="line">        buygoods.setId(goodsid);</span><br><span class="line">        buygoods.setAmount(nums);</span><br><span class="line">        goodsdao.updateGoods(buygoods);</span><br><span class="line">        System.out.println(<span class="string">&quot;============end=============&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在你的方法上面加上@Transactional的注解</li>
</ol>
<ul>
<li>先在applicationcontext中配置我们需要使用到的一些bean  TransactionManager（事务管理） 和 annotation-driver （注解驱动） 在tx里面</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/util https://www.springframework.org/schema/util/spring-util.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_maxActive&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;SqlsessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:Mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用MapperScanner创建接口代理类，service使用注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.sea.DAO&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SqlsessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.sea.Service.Impl.ByGoodServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;goodsdao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;goodsDAO&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;saledao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;saleDAO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-----------------------------------------重要 关键点-------------------------------------------------------&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用spring的事务处理--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;TransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--连接的数据库，指定数据源--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启事务注解驱动，告诉spring使用注解管理事务的代理对象</span></span><br><span class="line"><span class="comment">        transaction-manager:事务管理器对象的id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;TransactionManager&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-----------------------------------------重要 关键点-------------------------------------------------------&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sea.Service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sea.Contain.Goods;</span><br><span class="line"><span class="keyword">import</span> com.sea.Contain.Sale;</span><br><span class="line"><span class="keyword">import</span> com.sea.DAO.GoodsDAO;</span><br><span class="line"><span class="keyword">import</span> com.sea.DAO.SaleDAO;</span><br><span class="line"><span class="keyword">import</span> com.sea.Exception.NotEnoughtExcep;</span><br><span class="line"><span class="keyword">import</span> com.sea.Service.ByGoodService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Isolation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Propagation;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ByGoodServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ByGoodService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SaleDAO saledao;</span><br><span class="line">    <span class="keyword">private</span> GoodsDAO goodsdao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSaledao</span><span class="params">(SaleDAO saledao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.saledao = saledao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGoodsdao</span><span class="params">(GoodsDAO goodsdao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.goodsdao = goodsdao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * rollbackFor:表示发生指定异常要回滚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> goodsid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/*@Transactional(</span></span><br><span class="line"><span class="comment">            propagation = Propagation.REQUIRED,</span></span><br><span class="line"><span class="comment">            isolation = Isolation.DEFAULT,</span></span><br><span class="line"><span class="comment">            readOnly = false,</span></span><br><span class="line"><span class="comment">            rollbackFor = &#123;</span></span><br><span class="line"><span class="comment">                    NullPointerException.class,</span></span><br><span class="line"><span class="comment">                    NotEnoughtExcep.class</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">    )*/</span></span><br><span class="line">    <span class="comment">//默认抛出运行时异常回滚事务</span></span><br><span class="line">    <span class="meta">@Transactional</span> <span class="comment">//这里的一行和上面的一大块是等效的</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">(Integer goodsid, Integer nums)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============start============&quot;</span>);</span><br><span class="line">        <span class="type">Sale</span> <span class="variable">sale</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sale</span>();</span><br><span class="line">        sale.setGoodsid(goodsid);</span><br><span class="line">        sale.setNums(nums);</span><br><span class="line">        saledao.insertSaleRecord(sale);</span><br><span class="line">        <span class="comment">//更新库存</span></span><br><span class="line">        <span class="type">Goods</span> <span class="variable">goods</span> <span class="operator">=</span> goodsdao.selectGoodsById(goodsid);</span><br><span class="line">        <span class="keyword">if</span>(goods == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//没有</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>(<span class="string">&quot;编号是为&quot;</span>+goodsid+<span class="string">&quot;商品不存在&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(goods.getAmount() &lt; nums)&#123;</span><br><span class="line">            <span class="comment">//商品不足够</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NotEnoughtExcep</span>(<span class="string">&quot;商品不足！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//修改库存了</span></span><br><span class="line">        <span class="type">Goods</span> <span class="variable">buygoods</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Goods</span>();</span><br><span class="line">        buygoods.setId(goodsid);</span><br><span class="line">        buygoods.setAmount(nums);</span><br><span class="line">        goodsdao.updateGoods(buygoods);</span><br><span class="line">        System.out.println(<span class="string">&quot;============end=============&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2-在大型项目中如何处理事务"><a href="#6-2-在大型项目中如何处理事务" class="headerlink" title="6.2  在大型项目中如何处理事务"></a>6.2  在大型项目中如何处理事务</h2><ul>
<li><p>使用aspectJ的AOP配置管理事务（掌握）</p>
<ul>
<li>适合大型项目，有很多的方法和类需要大量的配置事务，需要使用aspectJ框架功能，在spring配置文件中申明类，方法需要的事务。这种方式业务方法和事务完全分离。</li>
</ul>
</li>
<li><p>实现步骤：</p>
<ul>
<li><p>都是在xml配置文件中实现的</p>
<ol>
<li><p>要使用的是aspectJ 故需要在maven中添加依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>申明事务管理器的对象</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;TransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--连接的数据库，指定数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>申明方法需要的事务类型(配置方法的事务属性（隔离级别，传播行为，超时）)</li>
<li>主配置文件的内容</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/util https://www.springframework.org/schema/util/spring-util.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">        http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;mydataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc_maxActive&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;SqlsessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mydataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:Mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--使用MapperScanner创建接口代理类，service使用注入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.sea.DAO&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SqlsessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;service&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.sea.Service.Impl.ByGoodServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;goodsdao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;goodsDAO&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;saledao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;saleDAO&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--申明式事务处理 和源代码是完全分离的--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--事务管理器对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;TransactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;mydataSource&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--申明业务方法的事务属性--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--id:自定义名称 表示tx:advice 和 &lt;/tx:advice&gt;之间的配置内容的</span></span><br><span class="line"><span class="comment">        transaction-manager：事务管理器对象的id</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!---------------------------------------------关键点------------------------------------------------------&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;myAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;TransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--表示属性--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--给不同的方法配置事务属性</span></span><br><span class="line"><span class="comment">                name: 1. 方法的名称 1完整的方法名 不带有包和类</span></span><br><span class="line"><span class="comment">                      2.方法可以适合用通配符，*表示任意字符</span></span><br><span class="line"><span class="comment">                propagation：传播行为</span></span><br><span class="line"><span class="comment">                isolation：隔离级别</span></span><br><span class="line"><span class="comment">                rollback-for：指定异常需要回滚的类 需要全限定的类名</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;buy&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;DEFAULT&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.NullPointerException,com.sea.Exception.NotEnoughtExcep&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;DEFAULT&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;DEFAULT&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;remover*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">isolation</span>=<span class="string">&quot;DEFAULT&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;SUPPORTS&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置AOP--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--id：配置切入点表达式的名称，唯一值</span></span><br><span class="line"><span class="comment">            express：切入点表达式，指定哪些类要使用事务，aspectJ会创建代理对象--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;servicePoint&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* *..Service..*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置增强器：关联advice和pointcut</span></span><br><span class="line"><span class="comment">            advice-ref:通知，上面tx:advice那里的配置</span></span><br><span class="line"><span class="comment">            pointcut-ref:切入点表达式的id</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;myAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;servicePoint&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-----------------------------------------------------关键点----------------------------------------------&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h1 id="7-在web项目中如何使用容器对象：监听器的使用"><a href="#7-在web项目中如何使用容器对象：监听器的使用" class="headerlink" title="7.在web项目中如何使用容器对象：监听器的使用"></a>7.在web项目中如何使用容器对象：监听器的使用</h1><ul>
<li><p>之前用的都是SE项目 在main方法中执行代码</p>
</li>
<li><p>Web不是怎么运行的，他是在Tomcat中运行的，项目一旦启动就会一直运行的。</p>
</li>
<li><p>需求：<br>web项目中的容器对象只需要创建一次，把容器的对象放到全局作用域servletContext中</p>
<p>如何实现？</p>
<ul>
<li>使用监听器 当全局作用域对象创建时 创建容器 放入servletContext中</li>
</ul>
</li>
<li><p>监听器作用：</p>
<ul>
<li>创建容器对象，执行ApplicationContext ctx &#x3D; new ClassPathXmlApplicationContext(“applicationContext.xml”)</li>
<li>把容器对象放入到servletContext，servletContecxt.setAttribute(key,ctx)</li>
</ul>
</li>
<li><p>监听器可以自定义 亦可以使用框架中以提供的contextLoaderListenner.</p>
</li>
<li><p>由于tomcat不同的servlet版本导致了冲突 使得有些内容是无法实现的</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myservlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.sea.Contorller.RegistStudents<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myservlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/reg<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册监听器ContextLoaderListener</span></span><br><span class="line"><span class="comment">    监听器被创建对象后，会读取/web-inf/applicationContext_1.xml</span></span><br><span class="line"><span class="comment">    为什么要读取文件：因为在监听器中要创建applicationContext对象，需要加载配置文件</span></span><br><span class="line"><span class="comment">    /web-INF/applicationContext.xml就是监听器默认读取的spring配置文件路径</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    可以修改默认的文件位置，使用context-param重新指定文件的位置</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!----------------------------------------------------------important-----------------------------------------------------&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext_1.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!----------------------------------------------------------important-----------------------------------------------------&gt;</span></span><br></pre></td></tr></table></figure>































































</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/05/22/SpringLearn/">http://example.com/2024/05/22/SpringLearn/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/05/22/SpringMVCLearn/" title="SpringMVCLearn"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">SpringMVCLearn</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">Spring简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-IOC-inverse-of-control"><span class="toc-number">2.</span> <span class="toc-text">1 IOC(inverse of control)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%A6%82%E4%BD%95%E7%BB%99java%E5%AF%B9%E8%B1%A1%E8%B5%8B%E5%80%BC"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 如何给java对象赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-set%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1.1 set注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E6%9E%84%E9%80%A0%E6%B3%A8%E5%85%A5"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.1.2  构造注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5"><span class="toc-number">2.2.</span> <span class="toc-text">4.5 前置通知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5"><span class="toc-number">2.3.</span> <span class="toc-text">4.6 后置通知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5"><span class="toc-number">2.4.</span> <span class="toc-text">4.7 环绕通知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E6%9C%80%E7%BB%88%E9%80%9A%E7%9F%A5"><span class="toc-number">2.5.</span> <span class="toc-text">4.9 最终通知</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-10-Pointcut"><span class="toc-number">2.6.</span> <span class="toc-text">4.10 @Pointcut</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E7%A8%8B%E5%BA%8F%E4%B8%BE%E4%BE%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">6. 程序举例环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%9F%BA%E6%9C%AC%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">6.1 基本处理方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%9C%A8%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E4%BA%8B%E5%8A%A1"><span class="toc-number">3.2.</span> <span class="toc-text">6.2  在大型项目中如何处理事务</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%9C%A8web%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%AE%B9%E5%99%A8%E5%AF%B9%E8%B1%A1%EF%BC%9A%E7%9B%91%E5%90%AC%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">7.在web项目中如何使用容器对象：监听器的使用</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/22/hello-world/" title="hello-world">hello-world</a><time datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/22/JDBC/" title="JDBC">JDBC</a><time datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/22/JVM./" title="JVM">JVM</a><time datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/22/MQ/" title="MQ">MQ</a><time datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/22/Linux_Learn/" title="Linux_Learn">Linux_Learn</a><time datetime="2024-05-22T08:33:06.000Z" title="Created 2024-05-22 16:33:06">2024-05-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>