<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hexo | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JAVAWEB1  servlet：12&lt;!--注意一下的路径以斜杠开始带享目名不需要添加端口号和IP和协议名--&gt;&lt;a href&#x3D;&quot;&#x2F;oa&#x2F;login.html&quot;&gt;user login&lt;&#x2F;a&gt;   界面层：通常有美工来完成  html javascript   逻辑层：通常由程序员来完成 javaBean…servlet spring">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2024/05/21/servletLearn/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="JAVAWEB1  servlet：12&lt;!--注意一下的路径以斜杠开始带享目名不需要添加端口号和IP和协议名--&gt;&lt;a href&#x3D;&quot;&#x2F;oa&#x2F;login.html&quot;&gt;user login&lt;&#x2F;a&gt;   界面层：通常有美工来完成  html javascript   逻辑层：通常由程序员来完成 javaBean…servlet spring">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-05-21T01:55:54.589Z">
<meta property="article:modified_time" content="2022-06-21T06:55:22.908Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/05/21/servletLearn/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hexo',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-21 14:55:22'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Untitled</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-05-21T01:55:54.589Z" title="Created 2024-05-21 09:55:54">2024-05-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-06-21T06:55:22.908Z" title="Updated 2022-06-21 14:55:22">2022-06-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="JAVAWEB"><a href="#JAVAWEB" class="headerlink" title="JAVAWEB"></a>JAVAWEB</h1><h1 id="1-servlet："><a href="#1-servlet：" class="headerlink" title="1  servlet："></a>1  servlet：</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注意一下的路径以斜杠开始带享目名不需要添加端口号和IP和协议名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/oa/login.html&quot;</span>&gt;</span>user login<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>界面层：通常有美工来完成  html javascript  </li>
<li>逻辑层：通常由程序员来完成 javaBean…servlet spring  </li>
<li>数据层：数据库分析员来完成  jdbc jdbc-odbc  </li>
<li>动态的数据需要JDBC技术来实现 我们需要写java程序的通信原理是什么样的呢？</li>
<li>创建一个servlet然后再在配置文件内将其部署</li>
</ul>
<p><img src="https://s1.328888.xyz/2022/05/05/hb6R7.png" alt="hb6R7.png"></p>
<p>webApp是具有独立性的一方 </p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><ul>
<li><p>servlet规定了：</p>
<ul>
<li>一个合格的webapp应该是这样的文件目录结构</li>
</ul>
<ul>
<li>一个合格的webapp应该是怎样的配置文件</li>
<li>一个合格的webapp应该将配置文件存放在哪里</li>
<li>一个合格的webappjava程序放在哪里</li>
</ul>
</li>
</ul>
<p>servlet规范是什么样的规范：</p>
<ul>
<li>遵寻servlet规范的webapp是可以放在WEB服务器中运行。</li>
<li>servlet规范了哪些接口<ul>
<li>规范了哪些接口</li>
<li>规范了那些类</li>
<li>规范了一个web应用中应该有哪些配置文件</li>
<li>规范了一个web应用中配置文件的名字</li>
<li>规范了一个web应用中配置文件的内容</li>
<li>规范了一个合法有效的webapp合法有效的目录结构因该是什么样的</li>
</ul>
</li>
</ul>
<h2 id="1-1-开发一个带有servlet的webapp"><a href="#1-1-开发一个带有servlet的webapp" class="headerlink" title="1.1  开发一个带有servlet的webapp"></a>1.1  开发一个带有servlet的webapp</h2><ul>
<li><p>开发步骤是怎样的？</p>
<ul>
<li><p>第一步：在webapp目录下新建一个目录，起名crm(这个crm就是webapp的名字) 当然也可以是其他名字 bank 此时创建的目录作为app的根目录存在</p>
</li>
<li><p>第二步：在根目录下创建一个WEB-INF</p>
<ul>
<li>这个目录的名字是严格规定的，写死的，无条件的，无理由的。</li>
</ul>
</li>
<li><p>第三步：创建一个classes文件夹，这个目录下存放的一定是.class文件</p>
</li>
<li><p>第四步：创建一个lib目录(非必须) 但是如果webapp需要第三方的jar文件时，将其放入此文件夹内</p>
</li>
<li><p>第五步：在WEB-INF目录下新建一个web.xml文件</p>
<ul>
<li><p>注意这个文件是必须的 xml文件就是配置文件记录了请求路径和servlet之间的关系 可以从root文件夹下拷贝没必要手写</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee</span></span></span><br><span class="line"><span class="string"><span class="tag">                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Welcome to Tomcat<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">     Welcome to Tomcat</span><br><span class="line">  <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>第六步：这个小java程序要实现java接口，</p>
<ul>
<li>接口不再jdk中，在webservice里面。</li>
</ul>
</li>
<li><p>第七步：在xml.class文件中编写配置信息，让”请求路径”和”servlet名”关联在一起</p>
<ul>
<li>这一步的专业名叫注册</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee</span></span></span><br><span class="line"><span class="string"><span class="tag">                      https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">metadata-complete</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Welcome to Tomcat<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">     Welcome to Tomcat</span><br><span class="line">  <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--servlet描述信息--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>asdf<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--这个位置是必须带有--包名的全限定名--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.sea.hello<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!--servlet映射信息--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--这里也是谁编写 但是要和上面的一样--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>asdf<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--这里需要一个路径 </span></span><br><span class="line"><span class="comment">	唯一的要求是必须以斜杠开始</span></span><br><span class="line"><span class="comment">	当前这个路径可以随便写--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/bbls<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>第十步： 启动tomcat服务器</p>
</li>
<li><p>第十一步： 打开浏览器在浏览器上输入一个url</p>
</li>
</ul>
<h2 id="1-2-如何将webapp中的信息输入到浏览器中："><a href="#1-2-如何将webapp中的信息输入到浏览器中：" class="headerlink" title="1.2 如何将webapp中的信息输入到浏览器中："></a>1.2 如何将webapp中的信息输入到浏览器中：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/*向控制台打印输出*/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;hello servlet&quot;</span>);</span><br><span class="line">        <span class="comment">/*向浏览器打印输出*/</span></span><br><span class="line">        <span class="comment">//设置相应内容类型是普通文本或者是html代码                特别注意设置获取流对象之前设置才有效 不要放在后面</span></span><br><span class="line">        servletResponse.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> servletResponse.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;the people republic of china is forever, peace full around the world is forever&quot;</span>);</span><br><span class="line">        <span class="comment">/*浏览器是可以识别html代码的所以我们也可以输出一段html代码*/</span></span><br><span class="line">        out.print(<span class="string">&quot;&lt;br&gt;&lt;h1&gt;the TIANNAN door&lt;/h1&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-如何在servlet中连接数据库"><a href="#1-3-如何在servlet中连接数据库" class="headerlink" title="1.3 如何在servlet中连接数据库"></a>1.3 如何在servlet中连接数据库</h2><ul>
<li>在servlet中直接编写java代码即可（JDBC）      如下</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sea;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">studentsInfo</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/mybase?serverTimezone=GMT&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;why123456&quot;</span>);</span><br><span class="line">            <span class="type">PreparedStatement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.prepareStatement(<span class="string">&quot;select empno,ename,sal from emp&quot;</span>);</span><br><span class="line">            set = statement.executeQuery();</span><br><span class="line"></span><br><span class="line">            servletResponse.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> servletResponse.getWriter();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(set.next())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">empno</span> <span class="operator">=</span> set.getInt(<span class="string">&quot;empno&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">ename</span> <span class="operator">=</span> set.getString(<span class="string">&quot;ename&quot;</span>);</span><br><span class="line">                <span class="type">double</span> <span class="variable">sal</span> <span class="operator">=</span> set.getDouble(<span class="string">&quot;sal&quot;</span>);</span><br><span class="line">                out.print(empno+<span class="string">&quot;,&quot;</span>+ename+<span class="string">&quot;,&quot;</span>+sal+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (set != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    set.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="1-4-servlet对象的生命周期"><a href="#1-4-servlet对象的生命周期" class="headerlink" title="1.4 servlet对象的生命周期"></a>1.4 servlet对象的生命周期</h2><h2 id="1-5-在IDE中开发servlet程序"><a href="#1-5-在IDE中开发servlet程序" class="headerlink" title="1.5 在IDE中开发servlet程序"></a>1.5 在IDE中开发servlet程序</h2><ul>
<li>第一步：New project创建一个新的空的项目</li>
<li>第二步：新建一个新的module(javase)</li>
<li>第三步：让模块变成javaee的模块           (目录结构要符合webapp的规范)<ul>
<li>在module上点击右键，添加框架支持 Add framework support…</li>
<li>在弹出的窗口中选择webApplication，之后会自动生成合法的目录结构</li>
<li>重点需要注意的 生成的目录中有一个web目录这个目录就对应webapp的根目录</li>
</ul>
</li>
<li>第四步：根据web application中生成的jsp文件，这里先将其删除。</li>
<li>第五步：编写servlet(helloServlet)</li>
<li>第六步：编写servlet程序</li>
<li>第七步：在web.xml文件中注册你编写的servlet对象</li>
<li>第八步：创建一个html文件，提供一个超文本连接，发送请求，tomcat执行后台的studentServlet</li>
<li>第九步：让IDEA工具关联Tomcat服务器。关联的过程中将webapp部署到Tomcat服务器中<ul>
<li>IDEA右上角的小锤子：Add configuration</li>
<li>左上角加号，点击Tomcatserver-&gt;local</li>
<li>在上面的选项卡中有deployment(点击用以部署webapp)</li>
<li>修改进程上下文 写到直接的项目文件夹的名字</li>
<li>应用</li>
</ul>
</li>
<li>第十步：启动tomcat服务器<ul>
<li>debug模式可启动</li>
</ul>
</li>
<li>第十一步：打开浏览器</li>
</ul>
<h1 id="2-servlet生命周期："><a href="#2-servlet生命周期：" class="headerlink" title="2  servlet生命周期："></a>2  servlet生命周期：</h1><h2 id="2-1-什么是servlet的生命周期"><a href="#2-1-什么是servlet的生命周期" class="headerlink" title="2.1  什么是servlet的生命周期"></a>2.1  什么是servlet的生命周期</h2><ul>
<li><p>servlet对象什么时候创建</p>
</li>
<li><p>servlet对象什么时候销毁</p>
</li>
<li><p>servlet对象创建了几个</p>
</li>
<li><p>servlet对象的生命周期是指一个servlet从出生到死亡的全过程</p>
</li>
<li><h5 id="servlet对象有谁来维护呢？"><a href="#servlet对象有谁来维护呢？" class="headerlink" title="servlet对象有谁来维护呢？"></a>servlet对象有谁来维护呢？</h5></li>
<li><p>servlet对象有tomcat全权负责</p>
</li>
<li><p>tomcat服务器又被称为web容器</p>
</li>
<li><p>web容器来管理web的生死</p>
</li>
<li><h5 id="我们自己new的servlet对象是不受web容器管理的"><a href="#我们自己new的servlet对象是不受web容器管理的" class="headerlink" title="我们自己new的servlet对象是不受web容器管理的"></a>我们自己new的servlet对象是不受web容器管理的</h5></li>
<li><p>在servlet中加一个无参数的构造器测试可知服务器中不会实例化servlet对象</p>
</li>
<li><p>可以在启动之前创建对象但是需要在xml文件中填写整数</p>
</li>
<li><pre><code class="xml">&lt;load-on-startup&gt;0&lt;/load-on-startup&gt;
内部的数值是一个优先级数 越小优先级越高
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">## 2.2 总结</span><br><span class="line"></span><br><span class="line">+ servlet是一个单实例的对象 （但是servlet不满足单例模式，我们称之为单例 因为tomcat只创建了一个实例 别人管不着）</span><br><span class="line">+ init和实例化只会进行一次 init还会在此处实例化一个对象 之后用户请求不会在进行init()函数了</span><br><span class="line">+ server是每次请求都会进行一次</span><br><span class="line">+ destory方法是在销毁之前调用的</span><br><span class="line">+ 服务器刚启动的时候默认是不会启动的 用户第一次请求的时候tomcat会调用无参构造方法创建一个实例</span><br><span class="line"></span><br><span class="line"># 3 适配器模式修改servlet</span><br><span class="line"></span><br><span class="line">+ **&lt;u&gt;*接口方法太多但是子类使用的方法不多？如何才能减少子类的代码量？*&lt;/u&gt;**</span><br><span class="line"></span><br><span class="line">  接口类---&gt;抽象类  实现了屏蔽效应</span><br><span class="line">  编写一个抽象类继承servlet接口实现了简化代码</span><br><span class="line"></span><br><span class="line">+ 思考一下：怎么进一步简化开发？</span><br><span class="line"></span><br><span class="line">  + 子类的init还能执行吗？</span><br><span class="line"></span><br><span class="line">    会，会默认调用父类的方法；</span><br><span class="line"></span><br><span class="line">模拟一下tomcat的代码：</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">public class tomcat&#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        Class clazz = Class.forname(&quot;com.xxx.xxxx.xxxx.mySeriver&quot;);</span><br><span class="line">        Object obj = clazz.newInstance();</span><br><span class="line">        Servlet slt = (Servlet)obj;</span><br><span class="line">        </span><br><span class="line">        //创建一个Servletconfig实例化出来</span><br><span class="line">        </span><br><span class="line">        //调用servlet的init方法</span><br><span class="line">        slt.init(servletconfig);</span><br><span class="line">        //调用servlet的server方法</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>final可以阻止子类重写方法 但是如果想让子类可以自定义方法的话 可以在final修饰的方法中加入一个重载方法 并在类中申明重载的方法 这样子类可以覆写没有final修饰的方法达到自定义的效果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span> ServletConfig config;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> SerletException&#123;</span><br><span class="line">    <span class="built_in">this</span>.config = config;</span><br><span class="line">    <span class="built_in">this</span>.init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是模板方法设计模式</p>
<ul>
<li>用transient修饰的属性是不可以序列化的</li>
<li>ServletConfig是什么？<ul>
<li>是servlet规范中的一员，servletConfig是一个接口</li>
</ul>
</li>
<li>谁去实现这个接口？</li>
<li>servletconfig对象里面是什么呢？<ul>
<li>包装的信息是web.xml中<servlet></servlet>中的信息。</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>config<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.sea.ConfigTest<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--init-param可以初始化信息--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>driver<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybase?serverTimezone=GMT<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>config<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/config/a<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>以上servlet标签中的init-param 是初始化参数 会自动被toncat装载到ServletConfig中；</p>
<ul>
<li>可以用一下方法获取config里面的内容</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Enumeration&lt;String&gt; names = config.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> names.nextElement();</span><br><span class="line">            writer.print(s+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> config.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        writer.print(url);</span><br></pre></td></tr></table></figure>


</li>
<li><p>整个webapp的servletContext对象只有一个，被称为上下文对象或者环境</p>
</li>
<li><p>servletContext对象对应的是真个web.xml文件</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">context.log(<span class="string">&quot;吾剑未尝不利 借汝头一用&quot;</span>);</span><br><span class="line"><span class="comment">//为记录在tomcat的logs目录里</span></span><br></pre></td></tr></table></figure>

<p>注意：以后编写servlet类的时候，实际上不会去直接继承genericservlet类的，因为我们是B&#x2F;S的系统，这种系统使用HTTP超文本传输协议的，在servlet规范中提供了一个叫httpservlet的类。httpservlet是genericservlet的子类</p>
<h1 id="4-HttpServlet"><a href="#4-HttpServlet" class="headerlink" title="4 HttpServlet"></a>4 HttpServlet</h1><h2 id="4-1-http的结构"><a href="#4-1-http的结构" class="headerlink" title="4.1 http的结构"></a>4.1 http的结构</h2><ul>
<li>http请求协议包含四个部分：<ul>
<li>请求协议 浏览器-&gt;服务器<ul>
<li>请求行</li>
<li>请求头</li>
<li>空白行</li>
<li>请求体</li>
</ul>
</li>
<li>响应协议 服务器-&gt;浏览器<ul>
<li>状态行</li>
<li>响应头</li>
<li>空白行</li>
<li>响应体</li>
</ul>
</li>
</ul>
</li>
<li>http的具体报文</li>
</ul>
<h3 id="4-1-1-get-http"><a href="#4-1-1-get-http" class="headerlink" title="4.1.1  get http"></a>4.1.1  get http</h3><ul>
<li><p>响应头</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200            				状态行</span><br><span class="line">Content-Type: text/html;charset=UTF-8   响应头</span><br><span class="line">Content-Length: 142</span><br><span class="line">Date: Sat, 07 May 2022 10:16:48 GMT</span><br><span class="line">Keep-Alive: timeout=20</span><br><span class="line">Connection: keep-alive</span><br><span class="line">									空白行</span><br><span class="line">&lt;!DOCTYPE html&gt;						 响应体</span><br><span class="line">&lt;html lang=&#x27;en&#x27;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&#x27;UTF-8&#x27;&gt;</span><br><span class="line">&lt;title&gt;from get servlet&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;&lt;h1&gt;from get servlet&lt;/h1&gt;&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;								</span><br><span class="line">								</span><br></pre></td></tr></table></figure>

<ul>
<li>状态行<ul>
<li>第一部分：版本协议号 http&#x2F;1.1</li>
<li>第二部分：状态码 （HTTP协议中规定的响应状态号，不同的响应结果对应不同的号码）<ul>
<li>200 表示响应成功，正常结束</li>
<li>404 表示资源不存在，通常是路径错误，或者是路径正确但是服务器中的资源没有启动</li>
<li>405 表示前端发送的请求方式与后端处理方式不一致时发生的<ul>
<li>比如：前段是POST请求，后端的处理方式是get方式进行处理的</li>
</ul>
</li>
<li>500 表示服务器的程序出了异常，一般认为是服务器端的错误导致的</li>
</ul>
</li>
</ul>
</li>
<li>怎么查看协议的内容<ul>
<li>chrome F12</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="4-1-2-post-http"><a href="#4-1-2-post-http" class="headerlink" title="4.1.2 post http"></a>4.1.2 post http</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://localhost:8080/httptest/postservlet 请求行</span><br><span class="line">Request Method: POST								请求头</span><br><span class="line">Status Code: 200 </span><br><span class="line">Remote Address: [::1]:8080</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 144</span><br><span class="line">Content-Type: text/html;charset=UTF-8</span><br><span class="line">Date: Sat, 07 May 2022 10:48:29 GMT</span><br><span class="line">Keep-Alive: timeout=20</span><br><span class="line">POST /httptest/postservlet HTTP/1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Content-Length: 26</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">sec-ch-ua: &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;99&quot;</span><br><span class="line">sec-ch-ua-mobile: ?0</span><br><span class="line">sec-ch-ua-platform: &quot;Windows&quot;</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">Origin: http://localhost:8080</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.82 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Sec-Fetch-Site: same-origin</span><br><span class="line">Sec-Fetch-Mode: navigate</span><br><span class="line">Sec-Fetch-User: ?1</span><br><span class="line">Sec-Fetch-Dest: document</span><br><span class="line">Referer: http://localhost:8080/httptest/index.html</span><br><span class="line">Accept-Encoding: gzip, deflate, br</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">												空白行</span><br><span class="line">username: lisi&amp;password: 123						请求体</span><br></pre></td></tr></table></figure>

<ul>
<li>请求行有三部分<ul>
<li>请求方式<ul>
<li>get</li>
<li>post</li>
<li>delete</li>
<li>put</li>
</ul>
</li>
<li>URI<ul>
<li>什么是uri？同一资源标识符。<ul>
<li>代表某个资源的名字，但是通过URI是定位的</li>
</ul>
</li>
<li>什么是URL？<ul>
<li>同一资源定位符</li>
</ul>
</li>
<li>URL包括URI</li>
</ul>
</li>
<li>http版本号</li>
</ul>
</li>
<li>请求头<ul>
<li>请求的主机</li>
<li>主机的端口号</li>
<li>浏览历史</li>
<li>平台信息</li>
<li>cookie等信息</li>
</ul>
</li>
<li>空白行<ul>
<li>空白行用来区分请求头和请求体</li>
</ul>
</li>
<li>请求体向服务器发送的具体数据</li>
</ul>
<h2 id="4-2-get请求和post请求有什么区别？"><a href="#4-2-get请求和post请求有什么区别？" class="headerlink" title="4.2  get请求和post请求有什么区别？"></a>4.2  get请求和post请求有什么区别？</h2><h3 id="4-2-1-结构差异"><a href="#4-2-1-结构差异" class="headerlink" title="4.2.1 结构差异"></a>4.2.1 结构差异</h3><ul>
<li>发送中的不同<ul>
<li>只有当你的form中method属性是post时，才是POST方式，其他的全是get方式</li>
</ul>
</li>
<li>get方式常用方式<ul>
<li>直接点击超链接</li>
<li>直接输入url访问website</li>
<li>使用form时标签中的method属性是get</li>
</ul>
</li>
<li>grt请求发送数据的时候 会挂在url后面，并且url后面会加一个?,?后面是数据。这样会导致返回的数据显示在url上。</li>
<li>post请求发送数据的时候在请求体中发送，不会回显到浏览器的地址栏中。</li>
<li>但是不管是post还是get它们的数据格式是完全相同的 不过是位置不同</li>
<li>get请求只能发送普通的字符串，并且发送的长度是有长度限制的。<ul>
<li>无法发送大数据量</li>
</ul>
</li>
<li>stop是可以发送任意类型的数据的，包括声音，视频，图像等等。</li>
<li>get请求在w3c中是这样描述的：get请求比较适合从服务端获取数据。</li>
<li>post请求在w3c中是这样描述的：post请求比较合适向服务器端传送。</li>
</ul>
<h3 id="4-2-2-安全性差异"><a href="#4-2-2-安全性差异" class="headerlink" title="4.2.2 安全性差异"></a>4.2.2 安全性差异</h3><ul>
<li>get请求是绝对安全的，因为get请求是从服务器中获取数据</li>
<li>post请求是相对危险的，如果提交的数据通过后门的方式进入到服务器中，服务器是很危险的。所以大部分时候post请求是需要监听的。</li>
<li>get支持缓冲  每次get请求时会现在浏览器缓存中寻找，找不到才会请求。<ul>
<li>有没有这样一种需求，不想要get走缓存？<ul>
<li>只要每一次的get的请求路径不同 路径后面加一个每时每刻变化的时间戳，每次的路径不同，浏览器就不走缓存了</li>
</ul>
</li>
</ul>
</li>
<li>post不支持缓存</li>
</ul>
<h2 id="4-3-Httpservlet源码分析"><a href="#4-3-Httpservlet源码分析" class="headerlink" title="4.3 Httpservlet源码分析"></a>4.3 Httpservlet源码分析</h2><ul>
<li><p>httpservlet是专门为http协议准备的。比GeneticServlet跟加适合HTTP写一下的的开发。</p>
</li>
<li><p>servlet在那个包下？</p>
<ul>
<li>jakarta.servlet.http.Httpservlet</li>
</ul>
</li>
<li><p>到目前为止我们接触了servlet规范中的哪些接口？</p>
<ul>
<li>servlet			</li>
<li>servletContext</li>
<li>servletConfig</li>
<li>servletResponse</li>
<li>servletRequest</li>
<li>servletException</li>
</ul>
</li>
<li><p>http包下有哪些接口呢？</p>
<ul>
<li>HttpServlet</li>
<li>HttpservletResponse</li>
<li>HttpServletRequest</li>
</ul>
</li>
<li><p>HttpServletRequest中封装了哪些信息呢？</p>
<ul>
<li>简称request对象</li>
<li>封装了请求协议的所有内容</li>
</ul>
</li>
<li><p>总结：</p>
<ul>
<li>后端重写了doget方法，前端就要发送get请求</li>
<li>后端重写了dopost方法，前端就要发送getpost请求</li>
</ul>
</li>
<li><p>实操</p>
<ul>
<li>编写一个类直接继承HttpServlet</li>
<li>重写Doget和DoPost方法<ul>
<li>使用的时候一定记得删除super.do(post&#x2F;get)();</li>
</ul>
</li>
<li>将servlet类配置到xml文件中</li>
<li>准备前端的表单中(form表单),form指定请求路径即可</li>
<li>准备前端的页面：在form中指定请求路径</li>
</ul>
</li>
<li><p>关于一个web站点的欢迎页面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-4-HttpServletRequest详解"><a href="#4-4-HttpServletRequest详解" class="headerlink" title="4.4 HttpServletRequest详解"></a>4.4 HttpServletRequest详解</h2><ul>
<li><p>httpServletRequest是一个接口</p>
</li>
<li><p>是servlet规范的一员</p>
</li>
<li><p>父接口叫servletrequest</p>
<ul>
<li>Map&lt;String,String[]&gt; getParamentMap()</li>
<li>String getParamenter(String name) 最常用的</li>
<li>Servletrequest会记录用户使用时候提交的数据</li>
</ul>
</li>
<li><p>如何将一个请求的信息传递到两个Servlet中呢？</p>
</li>
</ul>
<h3 id="4-4-1-Servlet的转发机制"><a href="#4-4-1-Servlet的转发机制" class="headerlink" title="4.4.1 Servlet的转发机制"></a>4.4.1 Servlet的转发机制</h3><ul>
<li>能否在AServlet中创建一个BServlet的对象 然后调用BServlet对象的doGet方法，把request对象传过去？<ul>
<li>不可以，因为processor自己实例化的对象TomCat是不会对他进行管理的</li>
</ul>
</li>
<li>正确操作<ul>
<li>跳转到<ul>
<li>转发（一次请求）</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">//第一步：获取请求转发器对象</span></span><br><span class="line">        <span class="comment">//相当于把/b包装到请求转发器中，实际上把下一个跳转的资源的路径告诉tomcat服务器</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">dispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;/b&quot;</span>);</span><br><span class="line">        <span class="comment">//第二步：调用请求转发器RequestDispatcher的forward方法，进行转发</span></span><br><span class="line">        <span class="comment">//转发的时候，这两个参数很重要，request和response都是要传递给下一个资源的</span></span><br><span class="line">        dispatcher.forward(req,resp);</span><br><span class="line"></span><br><span class="line">		其实第一步和第二步代码可以联合</span><br><span class="line">		req.getRequestDispatcher(<span class="string">&quot;/b&quot;</span>).forward(req,resq);</span><br><span class="line"></span><br><span class="line">注意想要得到最终的页面需要输入的还是前序的url-pattern 但是最终显示的是后序的内容</span><br></pre></td></tr></table></figure>

<ul>
<li>该方法实现了 两个servlet的之间的通信</li>
<li>转发的下一个资源一定要是servlet吗？<ul>
<li>不是的，可以是任意的资源，需要注意的是路径的格式</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">parameter</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);		<span class="comment">//获取前端提交的参数</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> req.getAttribute(<span class="string">&quot;name&quot;</span>);			   <span class="comment">//获取req.getAttribute(&quot;name&quot;,new String(&quot;hello&quot;));里面绑定的内容---&gt;hello</span></span><br></pre></td></tr></table></figure>



<h2 id="4-5-使用纯servlet做一个单表的CRUD操作"><a href="#4-5-使用纯servlet做一个单表的CRUD操作" class="headerlink" title="4.5  使用纯servlet做一个单表的CRUD操作"></a>4.5  使用纯servlet做一个单表的CRUD操作</h2><ul>
<li><p>使用纯servlet实现单表的增删查改</p>
</li>
<li><p>实现步骤</p>
<ul>
<li><p>1 创建一个数据库表</p>
</li>
<li><p>2  准备一套HTML页面</p>
<ul>
<li><p>把html表格准备好在链接中可以跑的通</p>
<ul>
<li><p>添加页面</p>
</li>
<li><p>修改页面</p>
</li>
<li><p>详情页面</p>
</li>
<li><p>欢迎页面</p>
</li>
<li><p>列表页面</p>
<p>+——-+———-+————+<br>| empno | ename | deptno |<br>+——-+———-+————+<br>|  7369 | SMITH    |     20 |<br>|  7499 | ALLEN    |     30 |<br>|  7521 | WARD     |     30 |<br>|  7566 | JONES    |     20 |<br>|  7654 | MARTIN  |     30 |<br>|  7698 | BLAKE    |     30 |<br>|  7782 | CLARK   |     10 |<br>|  7788 | SCOTT   |     20 |<br>|  7844 | TURNER|     30 |<br>|  7876 | ADAMS  |     20 |<br>|  7900 | JAMES   |     30 |<br>|  7902 | FORD     |     20 |<br>|  7934 | MILLER  |     10 |<br>|  8848 | SEAO     |     10 |<br>+——-+————–+——-+</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>分析我们需要实现的功能：</p>
<ul>
<li>什么是功能？<ul>
<li>需要连接数据库的操作就是功能</li>
</ul>
</li>
<li>包括一个功能？<ul>
<li>查看部门列表</li>
<li>保存用户需要功能</li>
<li>删除</li>
<li>修改用户信息</li>
</ul>
</li>
</ul>
</li>
<li><p>在IDEA中搭建开发环境</p>
<ul>
<li>创建webapp</li>
<li>添加依赖</li>
<li>jdbc工具类</li>
</ul>
</li>
<li><p>实现一个功能查看部门列表</p>
<ul>
<li><p>第一首先修改前端页面的超链接，因为用户先点击的就是超链接</p>
</li>
<li><pre><code class="html">&lt;a  href=&quot;/oa/dept/list&quot; &gt;员工列表&lt;/a&gt;       &lt;br&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ 配置servlet</span><br><span class="line"></span><br><span class="line">  + ```html</span><br><span class="line">    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">    &lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span><br><span class="line">             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span><br><span class="line">             version=&quot;4.0&quot;&gt;</span><br><span class="line">        &lt;servlet&gt;</span><br><span class="line">            &lt;servlet-name&gt;list&lt;/servlet-name&gt;</span><br><span class="line">            &lt;servlet-class&gt;com.sea.List&lt;/servlet-class&gt;</span><br><span class="line">        &lt;/servlet&gt;</span><br><span class="line">        &lt;servlet-mapping&gt;</span><br><span class="line">            &lt;servlet-name&gt;list&lt;/servlet-name&gt;</span><br><span class="line">            &lt;url-pattern&gt;/dept/list&lt;/url-pattern&gt;</span><br><span class="line">        &lt;/servlet-mapping&gt;</span><br><span class="line">    &lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p>写servlet</p>
<ul>
<li><p>在doget方法中查询所有员工信息</p>
<ul>
<li><p>所有的双引号要换成但引号，可能与java的字符串冲突。</p>
</li>
<li><p>sql语句可以先在DOS执行一下再写进去</p>
</li>
<li><pre><code class="java"> @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
        resp.setContentType(&quot;text/html;charset=utf-8&quot;);
        PrintWriter out = resp.getWriter();
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">                out.print(&quot;&lt;!DOCTYPE html&gt;&quot;);</span><br><span class="line">                out.print(&quot;&lt;html&gt;&quot;);</span><br><span class="line">                out.print(&quot;	&lt;head&gt;&quot;);</span><br><span class="line">                out.print(&quot;		&lt;meta charset=&#x27;utf-8&#x27;&gt;&quot;);</span><br><span class="line">                out.print(&quot;		&lt;title&gt;员工信息&lt;/title&gt;&quot;);</span><br><span class="line">                out.print(&quot;	&lt;/head&gt;&quot;);</span><br><span class="line">                out.print(&quot;	&lt;body&gt;&quot;);</span><br><span class="line">                out.print(&quot;		&lt;h1 align=&#x27;center&#x27;&gt;部门列表&lt;/h1&gt;&quot;);</span><br><span class="line">                out.print(&quot;		&lt;hr&gt;&quot;);</span><br><span class="line">                out.print(&quot;			&lt;table border=&#x27;1px&#x27; align=&#x27;center&#x27; width=&#x27;50%&#x27;&gt;&quot;);</span><br><span class="line">                out.print(&quot;				&lt;tr&gt;&quot;);</span><br><span class="line">                out.print(&quot;					&lt;th&gt;员工序号&lt;/th&gt;&quot;);</span><br><span class="line">                out.print(&quot;					&lt;th&gt;员工姓名&lt;/th&gt;&quot;);</span><br><span class="line">                out.print(&quot;					&lt;th&gt;部门序号&lt;/th&gt;&quot;);</span><br><span class="line">                out.print(&quot;					&lt;th&gt;编辑&lt;/th&gt;&quot;);</span><br><span class="line">                out.print(&quot;				&lt;/tr&gt;&quot;);</span><br><span class="line">            </span><br><span class="line">                Connection conn = null;</span><br><span class="line">                PreparedStatement ps = null;</span><br><span class="line">                ResultSet set = null;</span><br><span class="line">                try &#123;</span><br><span class="line">                    conn = DBUtil.getConnection();</span><br><span class="line">                    ps = conn.prepareStatement(&quot;select empno,ename,deptno from emppro&quot;);</span><br><span class="line">                    set = ps.executeQuery();</span><br><span class="line">                    while(set.next())&#123;</span><br><span class="line">                        String empno = set.getString(&quot;empno&quot;);</span><br><span class="line">                        String ename = set.getString(&quot;ename&quot;);</span><br><span class="line">                        String deptno = set.getString(&quot;deptno&quot;);</span><br><span class="line">                        System.out.println(empno);</span><br><span class="line">                        System.out.println(ename);</span><br><span class="line">                        System.out.println(deptno);</span><br><span class="line">                        out.print(&quot;				&lt;tr&gt;&quot;);</span><br><span class="line">                        out.print(&quot;					&lt;td&gt;&quot;+empno+&quot;&lt;/td&gt;&quot;);</span><br><span class="line">                        out.print(&quot;					&lt;td&gt;&quot;+ename+&quot;&lt;/td&gt;&quot;);</span><br><span class="line">                        out.print(&quot;					&lt;td&gt;&quot;+deptno+&quot;&lt;/td&gt;&quot;);</span><br><span class="line">                        out.print(&quot;					&lt;td&gt;&quot;);</span><br><span class="line">                        out.print(&quot;						&lt;a href=&#x27;&#x27;&gt;删除&lt;/a&gt;&quot;);</span><br><span class="line">                        out.print(&quot;						&lt;a href=&#x27;update.html&#x27;&gt;修改&lt;/a&gt;&quot;);</span><br><span class="line">                        out.print(&quot;						&lt;a href=&#x27;detail.html&#x27;&gt;详细信息&lt;/a&gt;&quot;);</span><br><span class="line">                        out.print(&quot;					&lt;/td&gt;&quot;);</span><br><span class="line">                        out.print(&quot;				&lt;/tr&gt;&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; catch (Exception e) &#123;</span><br><span class="line">                    throw new RuntimeException(e);</span><br><span class="line">                &#125;finally&#123;</span><br><span class="line">                    DBUtil.disConnection(set,ps,conn);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​        </span><br><span class="line"></span><br><span class="line">                out.print(&quot;			&lt;/table&gt;&quot;);</span><br><span class="line">                out.print(&quot;			&lt;a href=&#x27;Add.html&#x27;&gt;添加员工&lt;/a&gt;&quot;);</span><br><span class="line">                out.print(&quot;	&lt;/body&gt;&quot;);</span><br><span class="line">                out.print(&quot;&lt;/html&gt;&quot;);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

+ 需要注意的是&lt;a href=&quot; &quot;&gt;前端发送请求要加项目名 action和href都是需要加项目名的

+ ```java
  String path = req.getContextPath(); //可以得到请求webapp的地址
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">      ​    </span><br><span class="line"></span><br><span class="line">+ 技巧</span><br><span class="line"></span><br><span class="line">  + 重点：向服务器提交数据的格式中的问号必须是英文的？ 不能是中文的？</span><br><span class="line"></span><br><span class="line">+ 配置empDetial信息</span><br><span class="line"></span><br><span class="line">  + ```html</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">            &lt;servlet-name&gt;detail&lt;/servlet-name&gt;</span><br><span class="line">            &lt;servlet-class&gt;com.Detail&lt;/servlet-class&gt;</span><br><span class="line">        &lt;/servlet&gt;</span><br><span class="line">        &lt;servlet-mapping&gt;</span><br><span class="line">            &lt;servlet-name&gt;detail&lt;/servlet-name&gt;</span><br><span class="line">            &lt;url-pattern&gt;/dept/detail&lt;/url-pattern&gt;</span><br><span class="line">        &lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>编写一个servlet：</p>
<ul>
<li>实现detail的展示</li>
</ul>
</li>
<li><pre><code class="html">&lt;body&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        function del(empno)&#123;
            if(window.confirm(&quot;亲 删了无法恢复哦&quot;))&#123; //弹出确认框 有ok和no选项-&gt;返回boolean
                /*	document.location.href=&quot;目标url&quot;
                       document.location =&quot;目标url&quot;
                       Window.location.href=&quot;目标url&quot;
                       Window.location=&quot;目标url&quot;
                */ //四种方式可选
                document.location.href=&quot;/oa/dept/delete?empno=&quot;+empno
            &#125;
        &#125;
    &lt;/script&gt;    
   
&lt;/body&gt;

&lt;a href=&quot;javascript:void(0)&quot; onclick=&quot;del(&quot;+empno+&quot;)&quot;&gt;删除&lt;/a&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">## 4.6转发与重定向</span><br><span class="line"></span><br><span class="line">+ 在一个webapp中有两种跳转的方式：</span><br><span class="line"></span><br><span class="line">  + 转发</span><br><span class="line">  + 重定向</span><br><span class="line"></span><br><span class="line">+ 转发和重定向的区别是什么？</span><br><span class="line"></span><br><span class="line">  + 代码上有区别</span><br><span class="line"></span><br><span class="line">    + 转发</span><br><span class="line"></span><br><span class="line">    + ```java</span><br><span class="line">      request.getRequestDispatcher(&quot;url&quot;).forward(req,resp);</span><br><span class="line">      </span><br></pre></td></tr></table></figure>

  + 重定向

  + ```
    response.sendRedirect(&quot;url&quot;);
    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">+ 形式上有什么区别？</span><br><span class="line"></span><br><span class="line">  + 转发 一次请求</span><br><span class="line">    + 在浏览器上发送的请求和跳转之后的请求地址没有发生变化，因为资源的跳转时在服务端完成的</span><br><span class="line">  + 重定向 两次请求</span><br><span class="line">    + 通过浏览器的response再次请求服务端跳转资源，内部是服务器内部的跳转。</span><br><span class="line"></span><br><span class="line">+ 什么时候用转发和重定向？</span><br><span class="line"></span><br><span class="line">  + 如果上一个servlet当中的request域当中绑定了数据，希望从下一个servlet当中的request域里面的数据取出来，使用转发机制</span><br><span class="line">  + 剩下的均使用重定向(重定向使用较多)</span><br><span class="line"></span><br><span class="line">+ 跳转到的下一个资源没有要求呢？必须是一个servlet吗？</span><br><span class="line"></span><br><span class="line">  + 不一定，跳转的资源只要是一个合法的资源即可。包括html，jsp</span><br><span class="line"></span><br><span class="line">+ 转发会存在浏览器的刷新问题。</span><br><span class="line"></span><br><span class="line">  + 转发不需要知道项目名 但是sendRedirect需要知道项目名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ 有一个问题是是的注意的是 实现如此简答的功能就要进行如此复杂的配置是非常不好的。</span><br><span class="line"></span><br><span class="line">  这种配置信息能不能直接写道java类里面呢？</span><br><span class="line"></span><br><span class="line">  servlet3.0之后提出了多种基于注解式开发 为什么不是直接标注上不再xml上面配置了</span><br><span class="line"></span><br><span class="line">  + 优点：开发效率高</span><br><span class="line"></span><br><span class="line">## 4.7 servlet的注解方式开发</span><br><span class="line"></span><br><span class="line">### webservlet</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@WebServlet</span><br><span class="line">public class UserAnnotationDevelopment extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<p>​	使用注解标注 此类就会变成一个servlet</p>
<p>Annotation源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebServlet &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>; <span class="comment">//servlet-name</span></span><br><span class="line"></span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;; <span class="comment">//和urlparttern要存储的数据是一样的 但是如果value只有一个值的时候可以省略value标签 //如果属性名是value的话 连value都可以省略</span></span><br><span class="line"></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;; <span class="comment">//servlet-mapping---&gt;urlpattern</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -<span class="number">1</span>;  <span class="comment">//启动阶段是非直接启动servlet 使用的话 置为1</span></span><br><span class="line"></span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;; <span class="comment">//注解的数组</span></span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>; </span><br><span class="line"></span><br><span class="line">    String <span class="title function_">smallIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">largeIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">description</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">displayName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>request———<br>    |—-getServletPath()    获取urlpattern的内容<br>    |——getContextPath()	获取webapp的根目录名</p>
<h2 id="模板方法设计模式解决类爆炸"><a href="#模板方法设计模式解决类爆炸" class="headerlink" title="模板方法设计模式解决类爆炸"></a>模板方法设计模式解决类爆炸</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sea;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/emp/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TemplateForm</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/emp/List&quot;</span>.equals(req.getServletPath()))&#123;</span><br><span class="line">            doList(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/emp/Add&quot;</span>.equals(req.getServletPath()))&#123;</span><br><span class="line">            doAdd(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/emp/Remove&quot;</span>.equals(req.getServletPath()))&#123;</span><br><span class="line">            doRemove(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/emp/Update&quot;</span>.equals(req.getServletPath()))&#123;</span><br><span class="line">            doUpdate(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doUpdate</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doRemove</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doAdd</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doList</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​	如果只是这样的话，可能会有用户恶意登录，就是说可能有人知道下一步的地址，从而不需要登录，直接访问内部信息。甚至可以做到直接通过url发送请求修改数据库的内容。</p>
<h1 id="5-关于B-S架构的session机制-会话机制"><a href="#5-关于B-S架构的session机制-会话机制" class="headerlink" title="5 关于B&#x2F;S架构的session机制 会话机制"></a>5 关于B&#x2F;S架构的session机制 会话机制</h1><h2 id="5-1-什么是会话？"><a href="#5-1-什么是会话？" class="headerlink" title="5.1 什么是会话？"></a>5.1 什么是会话？</h2><ul>
<li><p>用户打开浏览器。经行一系列的操作，然后最终i将浏览器关闭，这个过程叫一次会话</p>
</li>
<li><p>是什么一次请求？</p>
<ul>
<li>用户在浏览器上一次点击，就会触发请求</li>
</ul>
</li>
<li><p>请求对应的服务端的对象是request 会话也有一个对象 叫做session</p>
</li>
<li><p>session是属于B&#x2F;S架构的一部分</p>
<ul>
<li>如果使用php开发web项目，同样使用session这一机制<ul>
<li>他是一个规范，不同的语言对这样的会话方式都有实现</li>
<li>它最重要的作用是保留登录状态</li>
<li>这是一种登录成功的状态</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-Http是一种无状态协议"><a href="#5-2-Http是一种无状态协议" class="headerlink" title="5.2 Http是一种无状态协议"></a>5.2 Http是一种无状态协议</h2><ul>
<li>就是请求的时候B&#x2F;S是连接的，但是请求结束之后连接就断开了。是为了减小服务器的压力</li>
</ul>
<ul>
<li><p>为什么需要session来保存会话状态呢？</p>
</li>
<li><p>getSession()与getSession(true)一样，获取request对象关联的session对象，如果没有session，则返回一个新的session。</p>
<p>getSession(false)也是返回一个request对象关联的session对象，但如果没有session，则返回null。</p>
<ul>
<li><pre><code class="java">  HttpSession session = req.getSession();
        resp.setContentType(&quot;text/html&quot;);
        PrintWriter out = resp.getWriter();
        out.print(session);
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">证明session的特性:</span><br><span class="line"></span><br><span class="line">+ 为什么不使用request和servletContext对象来保存会话状态？</span><br><span class="line"></span><br><span class="line">  + request.setAttribute()和request.getAttribute()，servletContext也有这样的方法，request是请求域。servletContext是应用域</span><br><span class="line">  + request是一次请求的对象</span><br><span class="line">  + ServletContext对象是服务器启动的时候创建的，服务器关闭的时候销毁，这个servletContext对象只有一个。</span><br><span class="line">  + servletContext域太大</span><br><span class="line">  + request请求域，servletContext应用域，session会话域</span><br><span class="line">  + request&lt;session&lt;application</span><br><span class="line">  + session的意义是实现用户信息的独立</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	# 5.3 Session的应用和原理	</span><br><span class="line"></span><br><span class="line">+ 思考一下session的实现原理？</span><br><span class="line"></span><br><span class="line">  + ```java</span><br><span class="line">    HttpSession session = requset.getSession(); </span><br><span class="line">    session.setAttribute();  //使用session绑定资源</span><br><span class="line">    session.getAttribute();	//使用session获取资源</span><br><span class="line">    session.removeAttribute(); //使用session解绑资源</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
<li><p>这行代码很神奇。张三访问的时候获取的session对象是张三的，李四获取的session是李四的</p>
</li>
<li><p>每个session会有一个记号 其实就是一个cookie</p>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-1-session的实现"><a href="#5-3-1-session的实现" class="headerlink" title="5.3.1 session的实现"></a>5.3.1 session的实现</h3><ul>
<li>在web服务器中有一个session列表，类似于map集合，map集合中的key存储的的是session的is</li>
<li>这个map的value是一个session的对象</li>
<li>用户第一次发送请求的时候，服务器会创建一个session对象，并生成一个id，然后web服务器会将session的id发送给浏览器，浏览器将session的id保存在浏览器的缓存中。</li>
<li>用户发送第二次请求的时候会自动将浏览器中的sessionid发送给服务器，服务器会根据sessionid找到对应的session对象。</li>
<li>为什么关闭浏览器，会话结束？<ul>
<li>关闭浏览器之后，浏览器中的session消失，下次打开浏览器的时候浏览器的缓存中没有这个sessionid，自然就找不到对应的session对接。<ul>
<li>又有一个问题 此时的session在服务器中还存在吗？<ul>
<li>有可能session还存在</li>
<li>网银中的安全退出可以告知服务器会话结束，session将被服务器销毁。</li>
<li><img src="https://s1.328888.xyz/2022/05/10/HiZ3Q.png" alt="HiZ3Q.png"></li>
</ul>
</li>
</ul>
</li>
<li>如果cookie禁用了会发生什么呢？<ul>
<li>cookie禁用是服务器继续给浏览器发送Sessionid但是浏览器不会收取该sessionid</li>
<li>会导致每一次request都是产生新的session</li>
<li>在url后面加上一个;JSESSIONID&#x3D;sessionid 依然可以拿到session对象 但是url重写会提高开发的成本</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="5-3-2-session的销毁"><a href="#5-3-2-session的销毁" class="headerlink" title="5.3.2 session的销毁"></a>5.3.2 session的销毁</h3><ul>
<li>session什么时候销毁？<ul>
<li>一种销毁是超时销毁</li>
<li>一种销毁是手动销毁 session.invalid();</li>
</ul>
</li>
</ul>
<p><img src="https://s1.328888.xyz/2022/05/10/HiBzM.png" alt="HiBzM.png"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span> 可以涉资session的时效</span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sea;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/emp/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TemplateForm</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        ---------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession(); <span class="comment">//只有第一次有效</span></span><br><span class="line">        <span class="keyword">if</span>(session != <span class="literal">null</span> &amp;&amp; session.getAttribute(<span class="string">&quot;userinfo&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">        --------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;/emp/List&quot;</span>.equals(req.getServletPath())) &#123;</span><br><span class="line">                doList(req, resp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;/emp/Add&quot;</span>.equals(req.getServletPath())) &#123;</span><br><span class="line">                doAdd(req, resp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;/emp/Remove&quot;</span>.equals(req.getServletPath())) &#123;</span><br><span class="line">                doRemove(req, resp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;/emp/Update&quot;</span>.equals(req.getServletPath())) &#123;</span><br><span class="line">                doUpdate(req, resp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            resp.sendRedirect(req.getContextPath());<span class="comment">//访问根目录即可 自动回到登录界面</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doUpdate</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doRemove</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doAdd</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doList</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="6-Cookie原理和应用"><a href="#6-Cookie原理和应用" class="headerlink" title="6 Cookie原理和应用"></a>6 Cookie原理和应用</h1><ul>
<li>session的实现原理中，每一个session对象都是关联了一个sessionid 例如：<ul>
<li>JSESSION&#x3D;41hdiuqahwdooaidjiowjiopdjqwoj08</li>
<li>以上的是一个键值对应对数据其实就是cookie对象</li>
<li>对于session关联的cookie来说，这个cookie是被保存在浏览器的运行内存中的。</li>
<li>只要浏览器不关闭，用户再次请求的时候，全自动将内存中的cookie发送给服务器</li>
<li>服务器就是根据这个值来找到对应的session对象的</li>
</ul>
</li>
<li>cookie是怎么生成的？</li>
<li>cookie有什么用呢？<ul>
<li>cookie和session都是为了保存会话的状态。<ul>
<li>cookie是为了将状态信息存在浏览器客服端上。(cookie数据存在浏览器客服端上)</li>
<li>session是为了将状态信息存在服务器上。</li>
</ul>
</li>
</ul>
</li>
<li>保存在什么地方？<ul>
<li>可以保存在内存中 也可以存在外存中</li>
</ul>
</li>
<li>怎么保存的？</li>
<li>为什么要session和cookie呢？<ul>
<li>因为http是一个无状态的协议</li>
</ul>
</li>
<li>setMaxAge() 设置有效时间<ul>
<li>没有设置有效时间默认保存在运行内存中 关闭浏览器，cookie就会消失 只要设置了有效时间&gt;0 cookie一定会存在外存中</li>
<li>并且失效了会中内存中被清除</li>
</ul>
</li>
<li>setPath() </li>
<li>cookie()  构造方法</li>
<li>在java的servlet中，对cookie提供了哪些支持呢？<ul>
<li>提供了一个cookie类来专门表示cookie数据，jakarta.servlet.http.cookie<ul>
<li>浏览器会自动发送cookie</li>
</ul>
</li>
<li>java程序怎么发送cookie给程序呢？</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieTest</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//创建cookie对象</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;production&quot;</span>,<span class="string">&quot;123456879&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置cookie在一小时以后关闭 &gt;0 会保存到外存对应的时间 =0 会删除同名cookie &lt;0表示该cookie不会被存储(硬盘文件中) 还会在运行内存中和不调用Maxage是相同的效果</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">3600</span>);</span><br><span class="line">        </span><br><span class="line">        cookie.setPath(<span class="string">&quot;/session&quot;</span>);<span class="comment">//表示提交cookie的最上乘目录</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//将cookie回复到浏览器中</span></span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//获取cookie</span></span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="literal">null</span> )&#123;</span><br><span class="line">            <span class="comment">//获取cookie里面的key和value</span></span><br><span class="line">            <span class="keyword">for</span>(Cookie i:cookies)&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> i.getName();</span><br><span class="line">                <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> i.getValue();</span><br><span class="line">                System.out.println(name + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>cookie中的path，cookie关联的路径<ul>
<li>默认是请求路径上一级的所有子路径，cookie都会被发送到服务器</li>
</ul>
</li>
</ul>
<h1 id="7-过滤器的使用和及其实现原理："><a href="#7-过滤器的使用和及其实现原理：" class="headerlink" title="7 过滤器的使用和及其实现原理："></a>7 过滤器的使用和及其实现原理：</h1><h2 id="7-1-过滤器的实现"><a href="#7-1-过滤器的实现" class="headerlink" title="7.1 过滤器的实现"></a>7.1 过滤器的实现</h2><ul>
<li><p>代码重复问题如何解决？</p>
<ul>
<li>可以使用servlet规范中提供的filter<ul>
<li>有什么用？执行原理是什么？</li>
<li>一般是在过滤器中编写公共代码</li>
</ul>
</li>
</ul>
</li>
<li><p>过滤器怎么写？</p>
<ul>
<li><h3 id="编写一个java类实现一个接口-jakarta-servlet-filter实现接口当中的所有方法-实现filter接口"><a href="#编写一个java类实现一个接口-jakarta-servlet-filter实现接口当中的所有方法-实现filter接口" class="headerlink" title="编写一个java类实现一个接口 jakarta.servlet.filter实现接口当中的所有方法  实现filter接口"></a>编写一个java类实现一个接口 jakarta.servlet.filter实现接口当中的所有方法  实现filter接口</h3></li>
</ul>
</li>
<li><p>filter的配置方法(xml中)</p>
<ul>
<li><p>十分类似servletde配置方法</p>
</li>
<li><pre><code class="html">    &lt;filter&gt;
        &lt;filter-name&gt;filter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.sea.FilterTest&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;filter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line">@WebFilter(&quot;/test&quot;) //这样也可以配置filter 可以过滤到/test之后的文件</span><br><span class="line">@WebFilter(&quot;/*&quot;)   	// 过滤整个webapp的所有servlet</span><br><span class="line">@WebFilter(&quot;*.html&quot;) //过滤所有html结尾的路径 叫做前缀匹配</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>一些特性：</p>
<ul>
<li>servlet在服务器启动时不会创建servlet实例</li>
<li>但是filter在服务器启动的情况下就会创建一个实例</li>
<li>另外servlet是单例的，并且filter也是单例的。</li>
</ul>
</li>
<li><p>目标servlet是否执行，却决于两个条件</p>
<ul>
<li>第一：过滤器中是否编写了：Chain.doFilter(request,respond);如果没有下一个过滤器了 执行最终的下一个servlet<ul>
<li>注意：filter的优先级要不servlet更高的</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//只用用户请求一次，就执行一次。</span></span><br><span class="line">        System.out.println(<span class="string">&quot;start&quot;</span>);</span><br><span class="line">        <span class="comment">//执行下一个过滤器，如果没有下一个过滤器则执行目标servlet</span></span><br><span class="line">        <span class="comment">//向下走 没有他不行</span></span><br><span class="line">        <span class="comment">//重要的一句话</span></span><br><span class="line">        <span class="comment">/*---------------------------------------------------*/</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse); <span class="comment">//会有一种类似于陷入的过程</span></span><br><span class="line">        <span class="comment">/*-------------------------------------------------*/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>嵌套filter也是可以的。 类似于栈的结构 后进先出</p>
<ul>
<li><p>同级谁先谁后与什么有关呢？优先级问题？</p>
<ul>
<li>filter-mapping在xml中在上就会先执行上面的filter</li>
</ul>
</li>
<li><p>使用注解形式。配置filter的时候同级执行顺序是怎样的呢？</p>
<ul>
<li>先后顺序取决于类名的比较结果</li>
<li>比如：<ul>
<li>filter1.java和filter2.java 先执行filter1.javad</li>
<li>filterA.java和filterB.java 先执行filterA.java</li>
</ul>
</li>
<li>filter的生命周期<ul>
<li>出了实例化时间不同之外，都是一致的</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://s1.328888.xyz/2022/05/11/HTld7.png" alt="HTld7.png"></p>
<ul>
<li>使用了filter之后：<ul>
<li><p>在编译过程阶段已经完成了调用关联</p>
</li>
<li><p>如果你希望改变调用的顺序，必须修改一下代码</p>
</li>
<li><p>java代码修改，需要重新编译，项目要重新发布，这是一个繁琐的过程</p>
</li>
<li><p>显然，这种设计违背了；OCP(open close principle) 即开闭原则</p>
</li>
<li><p>OCP：对拓展开放对修改关闭</p>
<ul>
<li><p>对项目扩展是没有问题的，但是最耗不要修改原有的代码。</p>
</li>
<li><p>过滤器就有这样的能力</p>
</li>
<li><p>过滤器最大的优点：</p>
<ul>
<li>在程序编译阶段不会确定调用顺序，因为filter的调用顺序是配置到web.xml文件中的，只要修改xml文件中的filter-mapping顺序，</li>
</ul>
</li>
<li><p>责任链最大的特点是可以在程序运行中实现动态的组合程序的调用顺序</p>
</li>
<li><pre><code class="java">package com.sea;

import jakarta.servlet.*;
import jakarta.servlet.annotation.WebFilter;

import java.io.IOException;


@WebFilter(&quot;/test&quot;)
public class FilterTest implements Filter &#123;

    public FilterTest() &#123;
        System.out.println(&quot;no param constructor&quot;);
    &#125;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException &#123;
        //init方法在filter第一次创建时调用 并且只使用一次

    &#125;

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123;
        //只用用户请求一次，就执行一次。
        System.out.println(&quot;start&quot;);
        //执行下一个过滤器，如果没有下一个过滤器则执行目标servlet
        //向下走 没有他不行
        //重要的一句话
        /*---------------------------------------------------*/
        filterChain.doFilter(servletRequest,servletResponse); //会有一种类似于陷入的过程
        /*-------------------------------------------------*/
        System.out.println(&quot;end&quot;);


    &#125;

    @Override
    public void destroy() &#123;
        //在被销毁之前调用，并且只执行一次

    &#125;
&#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 7.2  责任链设计模式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​	</span><br><span class="line"></span><br><span class="line"># 8 Listener 监听器</span><br><span class="line"></span><br><span class="line">+ 什么是监听器？</span><br><span class="line"></span><br><span class="line">  + 监听器是servlet规范中的一员，就像Filter也是servlet中的一员</span><br><span class="line">  + 在servlet中，所有的监听器的接口都是listener结尾</span><br><span class="line"></span><br><span class="line">+ 监听器有什么作用？</span><br><span class="line"></span><br><span class="line">  + 监听器实际上是servlet规范留给我们java程序员的特殊时机。</span><br><span class="line">  + 特殊的时刻需要执行这段代码，你需要想到使用监听器。</span><br><span class="line"></span><br><span class="line">+ servlet中提供哪些监听器呢？</span><br><span class="line"></span><br><span class="line">+ jakarta包下的：</span><br><span class="line"></span><br><span class="line">  + servletContextLiStener</span><br><span class="line">  + servletContextAttributeListener</span><br><span class="line">  + servletRequestListener</span><br><span class="line">  + servletRequestAttributeListener</span><br><span class="line"></span><br><span class="line">+ http包下的：</span><br><span class="line"></span><br><span class="line">  + HttpSessionListener</span><br><span class="line">  + HttpSessionAttributeListener</span><br><span class="line">  + HttpSessionBindingListener</span><br><span class="line">  + HttpSessionActivationListener</span><br><span class="line"></span><br><span class="line">+ 实现一个监听器</span><br><span class="line"></span><br><span class="line">  + 第一步 编写一个类实现servletContextListener接口，并且实现方法</span><br><span class="line"></span><br><span class="line">  + ```java</span><br><span class="line">    </span><br><span class="line">    public class myListener implements ServletContextListener &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void contextInitialized(ServletContextEvent sce) &#123;</span><br><span class="line">    </span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        @Override</span><br><span class="line">        public void contextDestroyed(ServletContextEvent sce) &#123;</span><br><span class="line">    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>第二步 在xml文件中配置信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;5.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.sea.myListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span> <span class="comment">//注释形式的配置listener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">		<span class="comment">//写一些你想在特殊时刻想要执行的代码即可</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">		</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：所有监听器中的方法都是不需要javaweb程序员调用的，都是由服务器来负责调用的。</li>
<li>当某个特殊的时间发生后，web服务器会自动调用</li>
</ul>
</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/05/21/servletLearn/">http://example.com/2024/05/21/servletLearn/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/05/21/Shell/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2024/05/21/Mybatis-Plus/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JAVAWEB"><span class="toc-number">1.</span> <span class="toc-text">JAVAWEB</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-servlet%EF%BC%9A"><span class="toc-number">2.</span> <span class="toc-text">1  servlet：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E5%B8%A6%E6%9C%89servlet%E7%9A%84webapp"><span class="toc-number">2.2.</span> <span class="toc-text">1.1  开发一个带有servlet的webapp</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%A6%82%E4%BD%95%E5%B0%86webapp%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF%E8%BE%93%E5%85%A5%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%EF%BC%9A"><span class="toc-number">2.3.</span> <span class="toc-text">1.2 如何将webapp中的信息输入到浏览器中：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E5%A6%82%E4%BD%95%E5%9C%A8servlet%E4%B8%AD%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.4.</span> <span class="toc-text">1.3 如何在servlet中连接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-servlet%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.5.</span> <span class="toc-text">1.4 servlet对象的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E5%9C%A8IDE%E4%B8%AD%E5%BC%80%E5%8F%91servlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.6.</span> <span class="toc-text">1.5 在IDE中开发servlet程序</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">2  servlet生命周期：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E4%BB%80%E4%B9%88%E6%98%AFservlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.1.</span> <span class="toc-text">2.1  什么是servlet的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#servlet%E5%AF%B9%E8%B1%A1%E6%9C%89%E8%B0%81%E6%9D%A5%E7%BB%B4%E6%8A%A4%E5%91%A2%EF%BC%9F"><span class="toc-number">3.1.0.0.1.</span> <span class="toc-text">servlet对象有谁来维护呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%88%91%E4%BB%AC%E8%87%AA%E5%B7%B1new%E7%9A%84servlet%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%B8%8D%E5%8F%97web%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E7%9A%84"><span class="toc-number">3.1.0.0.2.</span> <span class="toc-text">我们自己new的servlet对象是不受web容器管理的</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-HttpServlet"><span class="toc-number">4.</span> <span class="toc-text">4 HttpServlet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-http%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 http的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-get-http"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1  get http</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-post-http"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2 post http</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-get%E8%AF%B7%E6%B1%82%E5%92%8Cpost%E8%AF%B7%E6%B1%82%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">4.2.</span> <span class="toc-text">4.2  get请求和post请求有什么区别？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E7%BB%93%E6%9E%84%E5%B7%AE%E5%BC%82"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1 结构差异</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%AE%89%E5%85%A8%E6%80%A7%E5%B7%AE%E5%BC%82"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2 安全性差异</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-Httpservlet%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 Httpservlet源码分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-HttpServletRequest%E8%AF%A6%E8%A7%A3"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 HttpServletRequest详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-Servlet%E7%9A%84%E8%BD%AC%E5%8F%91%E6%9C%BA%E5%88%B6"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.4.1 Servlet的转发机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E4%BD%BF%E7%94%A8%E7%BA%AFservlet%E5%81%9A%E4%B8%80%E4%B8%AA%E5%8D%95%E8%A1%A8%E7%9A%84CRUD%E6%93%8D%E4%BD%9C"><span class="toc-number">4.5.</span> <span class="toc-text">4.5  使用纯servlet做一个单表的CRUD操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%A7%A3%E5%86%B3%E7%B1%BB%E7%88%86%E7%82%B8"><span class="toc-number">4.6.</span> <span class="toc-text">模板方法设计模式解决类爆炸</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%85%B3%E4%BA%8EB-S%E6%9E%B6%E6%9E%84%E7%9A%84session%E6%9C%BA%E5%88%B6-%E4%BC%9A%E8%AF%9D%E6%9C%BA%E5%88%B6"><span class="toc-number">5.</span> <span class="toc-text">5 关于B&#x2F;S架构的session机制 会话机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BC%9A%E8%AF%9D%EF%BC%9F"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 什么是会话？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-Http%E6%98%AF%E4%B8%80%E7%A7%8D%E6%97%A0%E7%8A%B6%E6%80%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 Http是一种无状态协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-session%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.3.1 session的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-session%E7%9A%84%E9%94%80%E6%AF%81"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.3.2 session的销毁</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-Cookie%E5%8E%9F%E7%90%86%E5%92%8C%E5%BA%94%E7%94%A8"><span class="toc-number">6.</span> <span class="toc-text">6 Cookie原理和应用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%8F%8A%E5%85%B6%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">7.</span> <span class="toc-text">7 过滤器的使用和及其实现原理：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 过滤器的实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAjava%E7%B1%BB%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%8E%A5%E5%8F%A3-jakarta-servlet-filter%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E5%BD%93%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E6%96%B9%E6%B3%95-%E5%AE%9E%E7%8E%B0filter%E6%8E%A5%E5%8F%A3"><span class="toc-number">7.1.1.</span> <span class="toc-text">编写一个java类实现一个接口 jakarta.servlet.filter实现接口当中的所有方法  实现filter接口</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/SpringMVCLearn/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.699Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/springcloud/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.647Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/Springboot/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.627Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/Shell/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.608Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/servletLearn/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.589Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>