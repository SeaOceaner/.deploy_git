<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hexo | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="#1.sql的分类&#x2F;*DDL 数据定义语言 create\alter 修改结构\drop 删除\rename\truncate:清空表，但是表的结构还在 表的结构的增删改查DML 数据操作语言 insert\delete\update 更新\select 查询\       表的数据的增删查改DQL 数据查询语言 selectDCL 数据控制语言 grant revokeTCL 事务控制">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2024/05/21/databaseLearn/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="#1.sql的分类&#x2F;*DDL 数据定义语言 create\alter 修改结构\drop 删除\rename\truncate:清空表，但是表的结构还在 表的结构的增删改查DML 数据操作语言 insert\delete\update 更新\select 查询\       表的数据的增删查改DQL 数据查询语言 selectDCL 数据控制语言 grant revokeTCL 事务控制">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2024-05-21T01:55:54.414Z">
<meta property="article:modified_time" content="2022-06-22T07:38:05.897Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/05/21/databaseLearn/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hexo',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-22 15:38:05'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Hexo"><span class="site-name">Hexo</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Untitled</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-05-21T01:55:54.414Z" title="Created 2024-05-21 09:55:54">2024-05-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-06-22T07:38:05.897Z" title="Updated 2022-06-22 15:38:05">2022-06-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-sql的分类"><a href="#1-sql的分类" class="headerlink" title="#1.sql的分类"></a>#1.sql的分类</h2><p>&#x2F;*<br>DDL 数据定义语言 create\alter 修改结构\drop 删除\rename\truncate:清空表，但是表的结构还在 表的结构的增删改查<br>DML 数据操作语言 insert\delete\update 更新\select 查询\       表的数据的增删查改<br>DQL 数据查询语言 select<br>DCL 数据控制语言 grant revoke<br>TCL 事务控制语言 commit rollback	</p>
<p>– 导入数据库的方式</p>
<p>&#x2F;*方式一：source 文件的全路径<br>mysql&gt;	source D:... 引入sql源文件<br>要用命令行执行<br>要在某一个database中导入<br>  方式二：基于具体的图形化界面的工具可以导入数据 </p>
<h2 id="–-列的别名"><a href="#–-列的别名" class="headerlink" title="– 列的别名"></a>– 列的别名</h2><p>– as:全称：alias（别名），可以省略 不是英语中的as（作为）<br>– 列的别名可以使用双引号引起来。<br>– select 是永远不会修改数据的</p>
<h2 id="条件格式"><a href="#条件格式" class="headerlink" title="条件格式"></a>条件格式</h2><p>mysql&gt; select * from emp where sal &gt;&#x3D; 1250 and sal &lt;&#x3D; 3000; 显示工资在1250 到 3000之间的 与下面的方法同</p>
<p>mysql&gt; select * from emp where sal between 1250 and 3000;</p>
<p> select * from emp where comm is not null; comm是空</p>
<p> select * from emp where comm is null;somm不是空</p>
<p>select * from emp where sal&gt;&#x3D;2500 and job &#x3D; ‘manager’; 工作岗位是管理 工资大于2500的员工；</p>
<p>select * from emp where sal&gt;&#x3D;2500 or job &#x3D; ‘manager’; 找到岗位是管理或者工资大于2500的员工；</p>
<p>select * from emp where sal&gt;&#x3D;2500 and (deptno &#x3D; 10 or deptno &#x3D; 20);找出部门编号为10或者20的且工资大于2500的员工；</p>
<p>说明：and和or同时出现，and优先级比较高 如果and和or同时出现or的内容加小括号；</p>
<p>select empno,job,ename from emp where job in(‘manager’,’salesman’); 工作是管理和销售的人员部分信息；</p>
<p>注意：in不是表示一个区间 而是一个一一对应的关系</p>
<p>select empno,job,ename from emp where sal not in(5000,3000)；工资不是3000和5000的员工</p>
<h2 id="14-模糊查询："><a href="#14-模糊查询：" class="headerlink" title="14 模糊查询："></a>14 模糊查询：</h2><p>like ‘’ 的使用</p>
<p>%是一个特殊的符号 。_下划线也是一特殊的字符</p>
<p>%匹配任意多的字符</p>
<p>_任意一个字符</p>
<p> select ename from emp where ename like ‘%O%’; 找到名字里面含有O的员工</p>
<p>select * from emp where ename like ‘_M%’; 找到名字第二个字母是m的员工</p>
<p>转义字符</p>
<p>_的转义\ _</p>
<h2 id="15-排序："><a href="#15-排序：" class="headerlink" title="15 排序："></a>15 排序：</h2><p>order by 默认是升序</p>
<p>sac指定升序 desc降序</p>
<p>多个字段排序：</p>
<p>按照多个字段排序；</p>
<p>有主有次 要求按照薪资升序 再按名字的升序排列</p>
<p>select</p>
<p>​	*</p>
<p>from </p>
<p>​	emp </p>
<p>order by </p>
<p>​	sal asc,ename asc; 在前的是起到主导作用的；</p>
<p>根据字段的位置也可以排序</p>
<p>select ename, sal from emp order by 2; 用第二列排序 </p>
<p>了解一下，不建议开发中这样使用，应为不健壮 删除一列会导致排序逻辑变化</p>
<p>select * from emp where sal between 1250 and 3000 order by sal desc;</p>
<h2 id="16-条件加排序的综合处理："><a href="#16-条件加排序的综合处理：" class="headerlink" title="16 条件加排序的综合处理："></a>16 条件加排序的综合处理：</h2><p>严格按照一个顺序</p>
<p>select </p>
<p>…</p>
<p>from</p>
<p>…</p>
<p>where</p>
<p>….</p>
<p>order by</p>
<p> …</p>
<p>先from</p>
<p>在where</p>
<p>在select</p>
<p>在order by</p>
<p>排序总是在最后执行</p>
<h2 id="17-数据处理函数"><a href="#17-数据处理函数" class="headerlink" title="17 数据处理函数"></a>17 数据处理函数</h2><p>数据处理函数又称为单行处理函数</p>
<p>单行处理函数的特点是一个输入对应一个输出 (单参数函数)</p>
<p>多行处理函数是多个输入对应一个输出(多参数函数)</p>
<p>单行处理函数常见的有哪些</p>
<p><img src="C:\Users\ADMINI~1\AppData\Local\Temp\1651320477124.png" alt="1651320477124"></p>
<p>lower函数 select lower(ename) ‘lowername’ from emp; 14个输入对应14个输出 这是单处理函数的特点</p>
<p> select upper(ename) ‘lowername’ from emp;大写</p>
<p>取子串 substr();</p>
<p>select substr(ename,1,1) ‘kk’ from emp; 其实位置以一为起始；</p>
<p>select substr(ename,1,2),job,sal from emp where substr(ename,1,1) &#x3D; ‘S’;截取子串</p>
<p>concat 函数进行字符串的拼接；</p>
<p>length()取字符串长度</p>
<p>trim()去除前后空白；select * from emp where ename &#x3D; trim(‘king’);</p>
<p>str_to_data;</p>
<p>data_fromat: 格式化日期</p>
<p>format 设置千分位</p>
<p>round 四舍五入</p>
<p>ifnull 可以将null转化为一个具体的值</p>
<p>select round(1234.567,2) as result from emp; 保留两位小数 &#x3D; 1234.57</p>
<p>select round(1234.567,1) as result from emp；保留一位小数 &#x3D;1234.6</p>
<p>select round(1234.567,-1) as result from emp；十位1240</p>
<p>select round(1234.567,-2) as result from emp；百位 1200；</p>
<p> select round(rand()*100) as result  from emp;得到一百以内的随机数</p>
<p>凡是空参加的运算最终结果都是null；</p>
<p>select ename,job,sal,(sal+ifnull(comm,0)) as anusal_comout from emp;  ifnull(object,result)函数前面写判断对象 后面写是null的时候对象当作什么？</p>
<p>case…when…then….when…than….else…..when…..; 当什么什么如何当什么什么如何如何此外当如何如何</p>
<p>不修改数据只是将查询结果显示为工资上调</p>
<p>实例： </p>
<p>select ename,job,sal oldersal,(case job when ‘manager’then sal<em>1.1 when ‘salesman’ then sal</em>1.5 else sal end) as newsal from emp；</p>
<p>当员工为管理的时候工资提高百分之十 当员工为销售人员时工作提高百分之五十 其他的不变；</p>
<h2 id="18-分组函数"><a href="#18-分组函数" class="headerlink" title="18 分组函数"></a>18 分组函数</h2><p>多行处理函数 一共有五个；</p>
<p>count() 计数</p>
<p>sum（）求和</p>
<p>avg（）求平均值</p>
<p>max（）求最大值</p>
<p>min（）求最小值</p>
<p>mysql&gt; select sum(sal),ename  from emp;<br>+———-+———-+<br>| sum(sal) | ename    |<br>+———-+———-+<br>| 39025.00 | SeaOcean |<br>+———-+———-+</p>
<p>mysql&gt; select avg(sal) from emp;<br>+————-+<br>| avg(sal)    |<br>+————-+<br>| 2601.666667 |<br>+————-+</p>
<p>mysql&gt; select min(sal) from emp;<br>+———-+<br>| min(sal) |<br>+———-+<br>|   800.00 |<br>+———-+</p>
<p>mysql&gt; select count(sal) from emp;<br>+————+<br>| count(sal) |<br>+————+<br>|         15 |<br>+————+</p>
<p>分组函数使用时要先分组 如果没有分组默认是整张表是一个组</p>
<p>分组函数在使用的时候要只注意哪些问题；</p>
<p>一、分组函数自动处理null，不需要提前对null进行处理；</p>
<p>二、分组函数中count(*)和count具体字段有什么区别</p>
<p>count(具体字段)：表示统计字段下所有不为null的字段</p>
<p>count(*)：统计表中的总行数</p>
<p>三、分组函数不能直接使用在where子句中；</p>
<h1 id="19-分组查询"><a href="#19-分组查询" class="headerlink" title="19 分组查询"></a>19 分组查询</h1><p>什么是分组查询：</p>
<p>先分组 再分组操作</p>
<p>select</p>
<p>​	…</p>
<p>from </p>
<p>​	…</p>
<p>where</p>
<p>​	….</p>
<p>group by</p>
<p>​	…</p>
<p>执行顺序：</p>
<p>1 from 2where 3group by4select 5order by</p>
<p>计算每个部门的工资和</p>
<p>计算每个岗位的平均工资</p>
<p>mysql&gt; select job,sum(sal) from emp  group by job order by sal;<br>+———–+———-+<br>| job       | sum(sal) |<br>+———–+———-+<br>| CLERK     |  4150.00 |<br>| SALESMAN  |  5600.00 |<br>| ANALYST   |  6000.00 |<br>| PRESIDENT |  5000.00 |<br>| MANAGER   | 18275.00 |<br>+———–+———-+</p>
<h3 id="重点结论："><a href="#重点结论：" class="headerlink" title="重点结论："></a>重点结论：</h3><p>在一条select语句中，如果有group by 语句的话，select后面只能跟：参加分组的字段及其分组函数。其他一律不行</p>
<p>mysql&gt; select deptno,max(sal) from emp group by deptno; 找到各个部门最大新资</p>
<p>+——–+———-+<br>| deptno | max(sal) |<br>+——–+———-+<br>|     20 | 10000.00 |<br>|     30 |  2850.00 |<br>|     10 |  5000.00 |<br>+——–+———-+</p>
<p>如何用两个关键字分组？</p>
<p>+——-+———-+———–+——+————+———-+———+——–+<br>| EMPNO | ENAME    | JOB       | MGR  | HIREDATE   | SAL      | COMM    | DEPTNO |<br>+——-+———-+———–+——+————+———-+———+——–+<br>|  1001 | SeaOcean | MANAGER   | 8848 | 1998-09-26 | 10000.00 |    NULL |     20 |<br>|  7369 | SMITH    | CLERK     | 7902 | 1980-12-17 |   800.00 |    NULL |     20 |<br>|  7499 | ALLEN    | SALESMAN  | 7698 | 1981-02-20 |  1600.00 |  300.00 |     30 |<br>|  7521 | WARD     | SALESMAN  | 7698 | 1981-02-22 |  1250.00 |  500.00 |     30 |<br>|  7566 | JONES    | MANAGER   | 7839 | 1981-04-02 |  2975.00 |    NULL |     20 |<br>|  7654 | MARTIN   | SALESMAN  | 7698 | 1981-09-28 |  1250.00 | 1400.00 |     30 |<br>|  7698 | BLAKE    | MANAGER   | 7839 | 1981-05-01 |  2850.00 |    NULL |     30 |<br>|  7782 | CLARK    | MANAGER   | 7839 | 1981-06-09 |  2450.00 |    NULL |     10 |<br>|  7788 | SCOTT    | ANALYST   | 7566 | 1987-04-19 |  3000.00 |    NULL |     20 |<br>|  7839 | KING     | PRESIDENT | NULL | 1981-11-17 |  5000.00 |    NULL |     10 |<br>|  7844 | TURNER   | SALESMAN  | 7698 | 1981-09-08 |  1500.00 |    0.00 |     30 |<br>|  7876 | ADAMS    | CLERK     | 7788 | 1987-05-23 |  1100.00 |    NULL |     20 |<br>|  7900 | JAMES    | CLERK     | 7698 | 1981-12-03 |   950.00 |    NULL |     30 |<br>|  7902 | FORD     | ANALYST   | 7566 | 1981-12-03 |  3000.00 |    NULL |     20 |<br>|  7934 | MILLER   | CLERK     | 7782 | 1982-01-23 |  1300.00 |    NULL |     10 |<br>+——-+———-+———–+——+————+———-+———+——–+</p>
<p>select job,deptno,max(sal) from emp group by deptno,job order by deptno;<br>+———–+——–+———-+<br>| job       | deptno | max(sal) |<br>+———–+——–+———-+<br>| CLERK     |     10 |  1300.00 |<br>| MANAGER   |     10 |  2450.00 |<br>| PRESIDENT |     10 |  5000.00 |<br>| ANALYST   |     20 |  3000.00 |<br>| CLERK     |     20 |  1100.00 |<br>| MANAGER   |     20 |  2975.00 |<br>| CLERK     |     30 |   950.00 |<br>| MANAGER   |     30 |  2850.00 |<br>| SALESMAN  |     30 |  1600.00 |<br>+———–+——–+———-+</p>
<p>select job,deptno,max(sal) from emp group by deptno,job having max(sal) &gt; 3000;<br>+———–+——–+———-+<br>| job       | deptno | max(sal) |<br>+———–+——–+———-+<br>| PRESIDENT |     10 |  5000.00 |<br>+———–+——–+———-+<br>1 row in set (0.00 sec)</p>
<p>以上sql语句执行效率较低</p>
<p>可以考虑先将大于3000的找出来 在分组</p>
<p>mysql&gt; select deptno,job from emp where sal &gt; 3000 group by deptno,job;<br>+——–+———–+<br>| deptno | job       |<br>+——–+———–+<br>|     10 | PRESIDENT |<br>+——–+———–+</p>
<p>找出每个部门平均新资，要求显示平均新资高于2500的；</p>
<p>还没分组时不能使用分组函数</p>
<p>mysql&gt; select avg(sal),deptno from emp group by deptno having avg(sal)&gt;2500;<br>+————-+——–+<br>| avg(sal)    | deptno |<br>+————-+——–+<br>| 2916.666667 |     10 |<br>+————-+——–+</p>
<p>能用where用where 没有where用having；</p>
<p>总结：</p>
<p>select</p>
<p>​	………</p>
<p>from</p>
<p>​	………..</p>
<p>where </p>
<p>​	……</p>
<p>group by</p>
<p>​	……..</p>
<p>having</p>
<p>​	…….</p>
<p>order by</p>
<p>​	……….</p>
<h2 id="20-distinct"><a href="#20-distinct" class="headerlink" title="20 distinct"></a>20 distinct</h2><p>distinct只能写在所有字段的最前方</p>
<h2 id="21-连接查询"><a href="#21-连接查询" class="headerlink" title="21 连接查询"></a>21 连接查询</h2><p>2.1 什么时连接查询？</p>
<p>冲一张表中单独查询，称为单独查询</p>
<p>emp表和dept表联合起来查询，从emp表中取出员工名字，从dept表中查出部门名称。</p>
<p>这种跨表查询，多张表联合起来查询数据，被称为连接查询。</p>
<p>2.2 连接查询的分类？</p>
<p>  根据语法的年代分类：</p>
<p>SQL92：上世纪92年出现的语法</p>
<p>SQL99：上世纪99年出现的语法</p>
<p>我们在这里重点学习SQL99 </p>
<p>根据表连接的方式分类：</p>
<p>内连接：</p>
<p>等值连接 非等值连接 自联结</p>
<p>外连接：</p>
<p>左连接 右连接</p>
<p>全连接（不讲）：几乎不用</p>
<p>2.3</p>
<p>当两张表进行连接查询时，没有任何条件限制会发生什么情况？</p>
<p>案例：查询每个员工的所在的部门名称？</p>
<p>mysql&gt; select ename,dname from emp,dept;<br>+——–+————+<br>| ename  | dname      |<br>+——–+————+<br>| SMITH  | OPERATIONS |<br>| SMITH  | SALES      |<br>| SMITH  | RESEARCH   |<br>| SMITH  | ACCOUNTING |<br>| ALLEN  | OPERATIONS |<br>| ALLEN  | SALES      |<br>| ALLEN  | RESEARCH   |<br>| ALLEN  | ACCOUNTING |<br>| WARD   | OPERATIONS |<br>| WARD   | SALES      |<br>| WARD   | RESEARCH   |<br>| WARD   | ACCOUNTING |<br>| JONES  | OPERATIONS |<br>| JONES  | SALES      |<br>| JONES  | RESEARCH   |<br>| JONES  | ACCOUNTING |<br>| MARTIN | OPERATIONS |<br>| MARTIN | SALES      |<br>| MARTIN | RESEARCH   |<br>| MARTIN | ACCOUNTING |<br>| BLAKE  | OPERATIONS |<br>| BLAKE  | SALES      |<br>| BLAKE  | RESEARCH   |<br>| BLAKE  | ACCOUNTING |<br>| CLARK  | OPERATIONS |<br>| CLARK  | SALES      |<br>| CLARK  | RESEARCH   |<br>| CLARK  | ACCOUNTING |<br>| SCOTT  | OPERATIONS |<br>| SCOTT  | SALES      |<br>| SCOTT  | RESEARCH   |<br>| SCOTT  | ACCOUNTING |<br>| KING   | OPERATIONS |<br>| KING   | SALES      |<br>| KING   | RESEARCH   |<br>| KING   | ACCOUNTING |<br>| TURNER | OPERATIONS |<br>| TURNER | SALES      |<br>| TURNER | RESEARCH   |<br>| TURNER | ACCOUNTING |<br>| ADAMS  | OPERATIONS |<br>| ADAMS  | SALES      |<br>| ADAMS  | RESEARCH   |<br>| ADAMS  | ACCOUNTING |<br>| JAMES  | OPERATIONS |<br>| JAMES  | SALES      |<br>| JAMES  | RESEARCH   |<br>| JAMES  | ACCOUNTING |<br>| FORD   | OPERATIONS |<br>| FORD   | SALES      |<br>| FORD   | RESEARCH   |<br>| FORD   | ACCOUNTING |<br>| MILLER | OPERATIONS |<br>| MILLER | SALES      |<br>| MILLER | RESEARCH   |<br>| MILLER | ACCOUNTING |<br>+——–+————+</p>
<p>没有任何条件限制 14 *4 &#x3D; 56</p>
<p>当两张表进行连接查询，没有任何条件限制时候，最终的查询条数，是两张表条数的乘积，这种现象</p>
<p>叫笛卡尔积现象；</p>
<p>如何避免笛卡尔积现象：那就是连接时加条件</p>
<p>满足条件的记录筛选出来</p>
<p>mysql&gt; select ename,dname from emp,dept where emp.deptno &#x3D; dept.deptno;<br>+——–+————+<br>| ename  | dname      |<br>+——–+————+<br>| SMITH  | RESEARCH   |<br>| ALLEN  | SALES      |<br>| WARD   | SALES      |<br>| JONES  | RESEARCH   |<br>| MARTIN | SALES      |<br>| BLAKE  | SALES      |<br>| CLARK  | ACCOUNTING |<br>| SCOTT  | RESEARCH   |<br>| KING   | ACCOUNTING |<br>| TURNER | SALES      |<br>| ADAMS  | RESEARCH   |<br>| JAMES  | SALES      |<br>| FORD   | RESEARCH   |<br>| MILLER | ACCOUNTING |<br>+——–+————+</p>
<p>思考：最终查询的结果是14条 但是匹配的过程中匹配的次数没有减少</p>
<p>给表起别名 同时加条件</p>
<p>mysql&gt; select e.ename,d.dname from emp e,dept d  where e.deptno &#x3D; d.deptno;<br>+——–+————+<br>| ename  | dname      |<br>+——–+————+<br>| SMITH  | RESEARCH   |<br>| ALLEN  | SALES      |<br>| WARD   | SALES      |<br>| JONES  | RESEARCH   |<br>| MARTIN | SALES      |<br>| BLAKE  | SALES      |<br>| CLARK  | ACCOUNTING |<br>| SCOTT  | RESEARCH   |<br>| KING   | ACCOUNTING |<br>| TURNER | SALES      |<br>| ADAMS  | RESEARCH   |<br>| JAMES  | SALES      |<br>| FORD   | RESEARCH   |<br>| MILLER | ACCOUNTING |<br>+——–+————+<br>14 rows in set (0.00 sec)</p>
<p>上面的是92语法</p>
<p>注意：通过笛卡尔积现象得出，表的连接次数越多，效率越低</p>
<p>2.5</p>
<p>内连接之等值连接</p>
<p>查询内个员工所在的部门名称显示员工名和部门名</p>
<p>将emp表和dept表进行连接，条件是e.deptno &#x3D; d.deptno</p>
<p>SQL99语法：</p>
<p>select</p>
<p>e.ename,d.dname </p>
<p>from </p>
<p>emp e</p>
<p>join</p>
<p>dept d</p>
<p>on</p>
<p>e.deptno &#x3D; d.deptno;</p>
<p>join…on…</p>
<p>mysql&gt; select * from salgrade;<br>+——-+——-+——-+<br>| GRADE | LOSAL | HISAL |<br>+——-+——-+——-+<br>|     1 |   700 |  1200 |<br>|     2 |  1201 |  1400 |<br>|     3 |  1401 |  2000 |<br>|     4 |  2001 |  3000 |<br>|     5 |  3001 |  9999 |<br>+——-+——-+——-+<br>5 rows in set (0.00 sec)</p>
<p>mysql&gt; select * from emp;<br>+——-+——–+———–+——+————+———+———+——–+<br>| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |<br>+——-+——–+———–+——+————+———+———+——–+<br>|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |<br>|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |<br>|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |<br>|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |<br>|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |<br>|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |<br>|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |<br>|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |<br>|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |<br>|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |<br>|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |<br>|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |<br>|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |<br>|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |<br>+——-+——–+———–+——+————+———+———+——–+<br>14 rows in set (0.00 sec)</p>
<h2 id="Innerjoin"><a href="#Innerjoin" class="headerlink" title="Innerjoin"></a>Innerjoin</h2><p>mysql&gt; select e.sal,e.ename,s.grade from emp e join salgrade s on e.sal between s.losal and s.hisal;<br>+———+——–+——-+<br>| sal     | ename  | grade |<br>+———+——–+——-+<br>|  800.00 | SMITH  |     1 |<br>| 1600.00 | ALLEN  |     3 |<br>| 1250.00 | WARD   |     2 |<br>| 2975.00 | JONES  |     4 |<br>| 1250.00 | MARTIN |     2 |<br>| 2850.00 | BLAKE  |     4 |<br>| 2450.00 | CLARK  |     4 |<br>| 3000.00 | SCOTT  |     4 |<br>| 5000.00 | KING   |     5 |<br>| 1500.00 | TURNER |     3 |<br>| 1100.00 | ADAMS  |     1 |<br>|  950.00 | JAMES  |     1 |<br>| 3000.00 | FORD   |     4 |<br>| 1300.00 | MILLER |     2 |<br>+———+——–+——-+</p>
<p>条件不是一个等量关系 成为非等值连接；</p>
<p>2.7 内连接之自联结</p>
<p>案例：查询员工的上级领导，要求显示员工名对应的领导名</p>
<p>mysql&gt; select a.ename worker,b.ename boss from emp a join emp b on a.mgr &#x3D; b.empno;<br>+——–+——-+<br>| worker | boss  |<br>+——–+——-+<br>| SMITH  | FORD  |<br>| ALLEN  | BLAKE |<br>| WARD   | BLAKE |<br>| JONES  | KING  |<br>| MARTIN | BLAKE |<br>| BLAKE  | KING  |<br>| CLARK  | KING  |<br>| SCOTT  | JONES |<br>| TURNER | BLAKE |<br>| ADAMS  | SCOTT |<br>| JAMES  | BLAKE |<br>| FORD   | JONES |<br>| MILLER | CLARK |<br>+——–+——-+</p>
<p>一张表 一个别名叫A 一个别名叫B</p>
<p>以上就是内连接中的自联结 </p>
<h2 id="外连接："><a href="#外连接：" class="headerlink" title="外连接："></a>外连接：</h2><p>内连接的特点是完全能够匹配上这个条件的数据查询出来。</p>
<p>select</p>
<p>e.ename,d.dname </p>
<p>from </p>
<p>emp e</p>
<p>rightjoin</p>
<p>dept d</p>
<p>on</p>
<p>e.deptno &#x3D; d.deptno;</p>
<p>right代表什么：表是将join关键字右边的整张表看成主要</p>
<p>表，主要是为了将这张表的数据显示出来，捎带</p>
<p>关联右边的表；</p>
<p>在外连接中表与表中存在主次关系 内连接中的表示平等的关系</p>
<p>带有right的是右外连接，又叫右连接</p>
<p>带有right的是左外连接，又叫左连接</p>
<p>左右连接是可以相互转化的；</p>
<p>外连接的查询结果条数一定是大于内连接查询结果条数的；</p>
<p>案例：查询每个员工的上级领导，要显示所有员工的名字和领导名字</p>
<p>mysql&gt; select a.ename,b.ename from emp a left join emp b on a.mgr &#x3D; b.empno;<br>+——–+——-+<br>| ename  | ename |<br>+——–+——-+<br>| SMITH  | FORD  |<br>| ALLEN  | BLAKE |<br>| WARD   | BLAKE |<br>| JONES  | KING  |<br>| MARTIN | BLAKE |<br>| BLAKE  | KING  |<br>| CLARK  | KING  |<br>| SCOTT  | JONES |<br>| KING   | NULL  |<br>| TURNER | BLAKE |<br>| ADAMS  | SCOTT |<br>| JAMES  | BLAKE |<br>| FORD   | JONES |<br>| MILLER | CLARK |<br>+——–+——-+</p>
<h2 id="2-9-多表如何连接"><a href="#2-9-多表如何连接" class="headerlink" title="2.9 多表如何连接"></a>2.9 多表如何连接</h2><p>语法一：</p>
<p>select </p>
<p>​	…</p>
<p>from</p>
<p>​	A</p>
<p>join</p>
<pre><code>  B
</code></pre>
<p>on</p>
<p>​	a与b连接的条件</p>
<p>join</p>
<p>​	C</p>
<p>on</p>
<p>​	a和c的连接条件</p>
<p>join</p>
<p>​	d</p>
<p>on </p>
<p>​	a和d连接的条件</p>
<p>案例：找出每个部门的员工名称，同时找出每个员工的工资等级；</p>
<p>要求显示员工名 部门名 薪资等级</p>
<p>mysql&gt; select e.ename,d.dname,s.grade from emp e left join dept d on e.deptno &#x3D; d.deptno join salgrade s on e.sal between s.losal and s.hisal ;<br>+——–+————+——-+<br>| ename  | dname      | grade |<br>+——–+————+——-+<br>| SMITH  | RESEARCH   |     1 |<br>| ALLEN  | SALES      |     3 |<br>| WARD   | SALES      |     2 |<br>| JONES  | RESEARCH   |     4 |<br>| MARTIN | SALES      |     2 |<br>| BLAKE  | SALES      |     4 |<br>| CLARK  | ACCOUNTING |     4 |<br>| SCOTT  | RESEARCH   |     4 |<br>| KING   | ACCOUNTING |     5 |<br>| TURNER | SALES      |     3 |<br>| ADAMS  | RESEARCH   |     1 |<br>| JAMES  | SALES      |     1 |<br>| FORD   | RESEARCH   |     4 |<br>| MILLER | ACCOUNTING |     2 |<br>+——–+————+——-+</p>
<p>案例：找出每个员工的部门名称以及工资等级还有上级领导</p>
<p>mysql&gt; select e.ename,d.dname,s.grade,e2.ename from emp e join dept d on e.deptno &#x3D; d.deptno join salgrade s on e.sal between s.losal and s.hisal left join emp e2 on e.mgr &#x3D; e2.empno;<br>+——–+————+——-+——-+<br>| ename  | dname      | grade | ename |<br>+——–+————+——-+——-+<br>| SMITH  | RESEARCH   |     1 | FORD  |<br>| ALLEN  | SALES      |     3 | BLAKE |<br>| WARD   | SALES      |     2 | BLAKE |<br>| JONES  | RESEARCH   |     4 | KING  |<br>| MARTIN | SALES      |     2 | BLAKE |<br>| BLAKE  | SALES      |     4 | KING  |<br>| CLARK  | ACCOUNTING |     4 | KING  |<br>| SCOTT  | RESEARCH   |     4 | JONES |<br>| KING   | ACCOUNTING |     5 | NULL  |<br>| TURNER | SALES      |     3 | BLAKE |<br>| ADAMS  | RESEARCH   |     1 | SCOTT |<br>| JAMES  | SALES      |     1 | BLAKE |<br>| FORD   | RESEARCH   |     4 | JONES |<br>| MILLER | ACCOUNTING |     2 | CLARK |<br>+——–+————+——-+——-+</p>
<h2 id="22子查询"><a href="#22子查询" class="headerlink" title="22子查询"></a>22子查询</h2><p>什么是子查询？</p>
<p>select 语句中嵌套select语句，被嵌套的语句被称为子查询。</p>
<p>子查询可以出现在哪里？</p>
<p>select</p>
<p>…..(select)</p>
<p>from </p>
<p>…..(select)</p>
<p>where</p>
<p>……..(select)</p>
<p>3.3where子句中出现子查询</p>
<p>案例 ：找出比最低工资高的员工姓名和工资</p>
<p>select ename,sal from emp where sal &gt; (select min(sal) from emp);</p>
<p>3.4 from子句中的查询</p>
<p>注意：from后面的子查询可以将子查询的查询结果当一张临时表来看待；</p>
<p>案例：找出每个岗位的平均工资的工资等级</p>
<p>mysql&gt; select t.*,s.grade from (select job,avg(sal) as avgsal from emp group by job) t join salgrade s on t.avgsal between s.losal and s.hisal;<br>+———–+————-+——-+<br>| job       | avgsal      | grade |<br>+———–+————-+——-+<br>| CLERK     | 1037.500000 |     1 |<br>| SALESMAN  | 1400.000000 |     2 |<br>| MANAGER   | 2758.333333 |     4 |<br>| ANALYST   | 3000.000000 |     4 |<br>| PRESIDENT | 5000.000000 |     5 |<br>+———–+————-+——-+</p>
<p>非常值得注意的是 arg() 要重命名才能在no里面使用</p>
<p>3.5 select后面的子查询</p>
<p>注意：对于select后面的子查询来说，这个只能一次返回一个结果，多于一条，就会报错；</p>
<h2 id="23-合并查询结果集"><a href="#23-合并查询结果集" class="headerlink" title="23 合并查询结果集"></a>23 合并查询结果集</h2><p>案例：查询工作岗位是manager和salesman的员工</p>
<p>mysql&gt; select ename,job from emp where job in (‘manager’,’salesman’)<br>    -&gt; ;<br>+——–+———-+<br>| ename  | job      |<br>+——–+———-+<br>| ALLEN  | SALESMAN |<br>| WARD   | SALESMAN |<br>| JONES  | MANAGER  |<br>| MARTIN | SALESMAN |<br>| BLAKE  | MANAGER  |<br>| CLARK  | MANAGER  |<br>| TURNER | SALESMAN |<br>+——–+———-+<br>7 rows in set (0.00 sec)</p>
<p>mysql&gt; select ename,job from emp where job &#x3D; ‘manager’<br>    -&gt; union<br>    -&gt; select ename,job from emp where job &#x3D; ‘salesman’<br>    -&gt; ;<br>+——–+———-+<br>| ename  | job      |<br>+——–+———-+<br>| JONES  | MANAGER  |<br>| BLAKE  | MANAGER  |<br>| CLARK  | MANAGER  |<br>| ALLEN  | SALESMAN |<br>| WARD   | SALESMAN |<br>| MARTIN | SALESMAN |<br>| TURNER | SALESMAN |<br>+——–+———-+</p>
<p>其中union的效率高一些，对于表连接来说，每次连接一张新表，则匹配的次数满足笛卡尔积</p>
<p>但是union可以减少匹配的次数。在减少匹配次数的情况下，还能完成两个结果集的拼接</p>
<p>注意事项：union要求在进行结果集合并时要求两个结果集的列数相同。数据类型也要一样</p>
<h3 id="5、limit"><a href="#5、limit" class="headerlink" title="5、limit"></a>5、limit</h3><p>将查询结果集的一部分取出来，通常在分页查询中；</p>
<p>按照薪资降序，取排名前五的员工</p>
<p>mysql&gt; select sal from emp order by sal desc limit 0,5;<br>+———+<br>| sal     |<br>+———+<br>| 5000.00 |<br>| 3000.00 |<br>| 3000.00 |<br>| 2975.00 |<br>| 2850.00 |<br>+———+<br>5 rows in set (0.00 sec)</p>
<h2 id="limit-start-length"><a href="#limit-start-length" class="headerlink" title="limit start, length;"></a>limit start, length;</h2><p>注意的是limit是在order by 之后执行的</p>
<p>取出工作排在5-9的员工</p>
<p>每页显示3条记录</p>
<p>第一页 limit0，3</p>
<p>第二页 limit 3，3</p>
<p>第三页 limit 6，3</p>
<p>每页显示pageSize条数记录：</p>
<p>第pageNo页：limit （pageNo - 1)*pageSize ,PageSize</p>
<p>from where group_by having select order_by limit</p>
<h2 id="23-建表的语法"><a href="#23-建表的语法" class="headerlink" title="23 建表的语法"></a>23 建表的语法</h2><p>name varchar(15) default ‘m’;  设置默认值。</p>
<p>str_to_date(‘01-09-1998’,’%d-%m-%Y’);</p>
<p>date_format(date,’%Y&#x2F;%m&#x2F;%d’)</p>
<p>date 和datetime 的区别</p>
<p>date:年月日</p>
<p>datetime：年月日时分秒</p>
<p>now()：系统当前时间 并且时间带有时分秒信息</p>
<h3 id="修改：update"><a href="#修改：update" class="headerlink" title="修改：update"></a>修改：update</h3><h2 id="update-emp-set-ename-‘wanghaoyang’-where-ename-‘king’"><a href="#update-emp-set-ename-‘wanghaoyang’-where-ename-‘king’" class="headerlink" title="&amp;update&amp;  emp  &amp;set&amp;  ename &#x3D; ‘wanghaoyang’  &amp;where&amp; ename &#x3D; ‘king’;"></a>&amp;update&amp;  emp  &amp;set&amp;  ename &#x3D; ‘wanghaoyang’  &amp;where&amp; ename &#x3D; ‘king’;</h2><p>mysql&gt; update emp set ename&#x3D;’seaocean’ where ename &#x3D; ‘king’;<br>Query OK, 1 row affected (0.01 sec)<br>Rows matched: 1  Changed: 1  Warnings: 0</p>
<p>mysql&gt; select * from emp;<br>+——-+———-+———–+——+————+———+———+——–+<br>| EMPNO | ENAME    | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |<br>+——-+———-+———–+——+————+———+———+——–+<br>|  7369 | SMITH    | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |<br>|  7499 | ALLEN    | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |<br>|  7521 | WARD     | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |<br>|  7566 | JONES    | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |<br>|  7654 | MARTIN   | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |<br>|  7698 | BLAKE    | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |<br>|  7782 | CLARK    | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |<br>|  7788 | SCOTT    | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |<br>|  7839 | seaocean | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |<br>|  7844 | TURNER   | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |<br>|  7876 | ADAMS    | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |<br>|  7900 | JAMES    | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |<br>|  7902 | FORD     | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |<br>|  7934 | MILLER   | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |<br>+——-+———-+———–+——+————+———+———+——–+<br>14 rows in set (0.00 sec)</p>
<h2 id="24-删除的语法"><a href="#24-删除的语法" class="headerlink" title="24 删除的语法"></a>24 删除的语法</h2><p>delete from emp where name ename &#x3D; ‘seaocean’;</p>
<p>insert语句可以一次插入多条记录？</p>
<p>insert into emp value (…),(…..),(…….);</p>
<p>快速复制表</p>
<p>create table emp2 as select * from emp; 可以完成表的快速赋值</p>
<p>很少用 学个乐 &#x2F;&#x2F;记录时可以重复的</p>
<p>快速删除表内的数据：</p>
<p>delete语句的原理：只是删除记录的指针但是不会清空磁盘中的数据，其实还是可以回滚的。</p>
<p>start transaction；开启事务</p>
<p>rollback ；回滚</p>
<p>删除效率比较低。</p>
<p>快速删除的方法：truncate</p>
<p>这种删除效率比较好，表被一次截断，物理删除。</p>
<p>缺点：不支持回滚</p>
<p>优点：高效</p>
<p>使用truncate之前一定要警告客户</p>
<h2 id="25对表结构的增删查改-可以使用使用sqlyog"><a href="#25对表结构的增删查改-可以使用使用sqlyog" class="headerlink" title="25对表结构的增删查改 可以使用使用sqlyog"></a>25对表结构的增删查改 可以使用使用sqlyog</h2><p>实际开发中很少使用表结构的修改</p>
<p>开放中修改表结构的代价很高</p>
<p>动表的结构就需要动大量的java代码 这样的责任应该由设计人员承担</p>
<p>如果真的要修改 可以使用程序</p>
<p>修改表结构不需要java 不是java的范畴</p>
<h2 id="26-创建表的时候加入约束："><a href="#26-创建表的时候加入约束：" class="headerlink" title="26 创建表的时候加入约束："></a>26 创建表的时候加入约束：</h2><p>什么是约束？</p>
<p>约束对应的英语单词是constraint</p>
<p>在创建表的时候 我们可以在表中的一个字段加上一些约束，来保证这个表中的数据完整性，有效性！！！</p>
<p>约束作用就是为了保证：表中的数据有效；</p>
<p>约束的一些形式：</p>
<p>​	not null;	非空</p>
<p>​	unique;	唯一</p>
<p>​	primary key;主键</p>
<p>​	foreign key;外键</p>
<p>实例：</p>
<p>create table students(</p>
<p>studentno int not null,</p>
<p>score int</p>
<p>)</p>
<h3 id="小插曲"><a href="#小插曲" class="headerlink" title="小插曲"></a>小插曲</h3><p>xxx.sql这种文件被成为sql脚本文件</p>
<p>sql脚本文件中的编写的大量的sql语句。我们执行的时候，该文件中的sql语句会全部执行！ </p>
<p>批量的执行的sql，可以使用sql脚本文件。在mysql中怎么使用脚本文件呢？</p>
<p>在你实际工作中，第一天到了公司，项目经理会给你一个sql文件，source一下在自己的数据库中就会出现这些数据</p>
<p>联合唯一性：要求name和email两个字段联合起来具有唯一性</p>
<p>create table emp(</p>
<p>id int,</p>
<p>name varchar(15),</p>
<p>email varchar(30);</p>
<p>unique(name,email)</p>
<p>);</p>
<p>此时是name和email联合起来唯一；</p>
<p>注意：约束直接加到列后面的叫列级约束 如果没有放在列后面的叫表级约束</p>
<p>什么时候使用表级约束？</p>
<p>需要给多个字段联合起来进行约束的叫标记约束。</p>
<p>not null只有列级约束，没有标记约束的语法。</p>
<p>在mysql中not noll unique 和primary是等价的； 在甲骨文中是不能这样的</p>
<h1 id="27-主键约束"><a href="#27-主键约束" class="headerlink" title="27 主键约束"></a>27 主键约束</h1><p>主键约束的相关术语：</p>
<p>主键字段：添加了主键约束的字段 </p>
<p>主键值：主键的值 </p>
<p>主键约束：主键的约束</p>
<p>什么是主键 有什么用处？</p>
<p>主键值是每一行记录的唯一标识</p>
<p>主键值是每一行记录的身份证</p>
<p>注意：任何一张表都应该有i一个主键，没有主键表无效</p>
<p>主键的特征：主键具有唯一性，不可重复性</p>
<p>create students(</p>
<p>name varchar(15)，</p>
<p>stdno bigint primary key,</p>
<p>score int</p>
<p>);</p>
<p>主键可以使用标记约束</p>
<p>create students(</p>
<p>name varchar(15)，</p>
<p>stdno bigint ,</p>
<p>score int,</p>
<p>primary(stdno,score)</p>
<p>);</p>
<h2 id="28-外键"><a href="#28-外键" class="headerlink" title="28 外键"></a>28 外键</h2><p>create t_class(</p>
<p>classno int primary key;</p>
<p>classname varchar(20)</p>
<p>);</p>
<p>create students(</p>
<p>name varchar(20),</p>
<p>classno int,</p>
<p>foreign key(classno) reference t_class(classno)</p>
<p>)</p>
<h2 id="29-存储引擎"><a href="#29-存储引擎" class="headerlink" title="29 存储引擎"></a>29 存储引擎</h2><p>innoDB</p>
<p>myisam</p>
<p>momery</p>
<h2 id="30-事务："><a href="#30-事务：" class="headerlink" title="30 事务："></a>30 事务：</h2><p>事务开：start transaction</p>
<p>事务结束：rollback        commit</p>
<p>事务具有四条性质：</p>
<p>A 原子性</p>
<p>B 一致性</p>
<p>I 隔离性</p>
<p>D 持久性  </p>
<p>重点研究一下事务的隔离性：</p>
<p>隔离涉及到隔离级别 一共有四个隔离级别</p>
<p>​	1 读未提交 read uncommitted</p>
<p>事务a可以读到事务b未提交的数据，这种隔离可能读到脏数据。这种隔离级别一般是理论上的。</p>
<p>​	2 读已提交 read committed </p>
<p><em>oracle</em>的默认隔离级别就是读已提交</p>
<p>不可重复读 一个事务里面可能两次读到的数据不同</p>
<p>解决了脏读但是不可重复读取数据，</p>
<p>​	3 可重复读 repeatable read 提交之后也读不到 读的都是开启事务时的数据</p>
<p>可重复读解决了不可重复读的问题，但是可能出现幻影读 每次读的数据都是幻象，不真实</p>
<p>​	4 序列化 serializable</p>
<p>最高的隔离级别，效率最低。解决了所有的问题。种族隔离级别表示事务排队，不能并行。</p>
<h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p> 什么是索引？</p>
<p>索引是在数据库的字段上添加的，是为了提高查询效率存在的一种机制。一张表的一个字段可以添加一个索引，当然，多个字段联合起来也可以添加索引。索引相当于一本书的目录，是为了缩小扫描范围而存在的一种机制。</p>
<p>加索引可以提高效率 但是要视情况而定。</p>
<p>在mysql数据库中索引也是需要排序的，并且这个索引的排序和TREESET数据结构相同。TreeSet底层是一个自平衡的二叉树！在mysql当中是一个B-Tree数据结构。</p>
<p>索引的实现原理：</p>
<p>提示：在任何一个数据库中主键会自动添加索引对象，id字段上有索引，以为id是pk的，另外mysql当中一个字段如果有unique约束的话，也会自动创建索引对象。在任何数据库中，任何一张表的任何一个记录都在硬盘上存储都有物理存储编号。在mysql当中，索引是一个单独的对象，不同的存储引擎以不同的形式存在，在myisam存储引擎中索引存在于一个.MYI文件中。在innodb存储引擎中索引存储在一个逻辑名称叫做tablespace的当中。在memory中存储在内存中，不管索引存储在哪里，索引在mysql中是一种树的形式纯在</p>
<p>在什么情况下添加索引：</p>
<p>​	条件一：数据量庞大 和硬件情况有关系</p>
<p>​	条件二：这个字段经常出现在where后面 常常在条件子句中出现</p>
<p>​	条件三：该字段很少的DML操作(insert delete update)</p>
<p>​	不建议随意添加索引，建议通过unique键来查 效率高一些</p>
<p>索引怎么创建？索引怎么删除？语法是什么？</p>
<p>create index emp_ename_index on emp(ename);</p>
<p>drop index emp_ename_index on emp;</p>
<p>索引有时候会失效，什么时候会失效呢？</p>
<h4 id="失效一"><a href="#失效一" class="headerlink" title="失效一"></a>失效一</h4><p>select * from emp where name like ‘%T’;</p>
<p>ename 上即使添加了索引，也不会查索引</p>
<p>原因是模糊查询当中以%开头了</p>
<p>尽量避免模糊查询的时候以‘%’开始</p>
<p>这是一种优化的手段</p>
<h4 id="失效二"><a href="#失效二" class="headerlink" title="失效二"></a>失效二</h4><p>使用or会失效 如果使用or要求两边都要有索引 才会使用索引 不然会失效</p>
<p>这是玩什么不建议使用or的原因</p>
<h4 id="失效三"><a href="#失效三" class="headerlink" title="失效三"></a>失效三</h4><p>使用符合索引的时候，没有使用左侧的列的时候 索引会失效</p>
<h4 id="失效四"><a href="#失效四" class="headerlink" title="失效四"></a>失效四</h4><p>在where中索引列参加了运算，索引失效。</p>
<h4 id="失效五"><a href="#失效五" class="headerlink" title="失效五"></a>失效五</h4><p>在where中索引使用了函数；单列函数</p>
<h3 id="索引的分类："><a href="#索引的分类：" class="headerlink" title="索引的分类："></a>索引的分类：</h3><p>索引是mysql数据库进行优化的重要手段</p>
<h1 id="视图-view"><a href="#视图-view" class="headerlink" title="视图(view)"></a>视图(view)</h1><p>视图是什么？</p>
<p>view站在不同的角度看同一份数据</p>
<h4 id="创建视图对象的方法？"><a href="#创建视图对象的方法？" class="headerlink" title="创建视图对象的方法？"></a>创建视图对象的方法？</h4><p>create view emp_view as select * from emp; 和复制有些相似</p>
<h4 id="删除视图对象的方法？"><a href="#删除视图对象的方法？" class="headerlink" title="删除视图对象的方法？"></a>删除视图对象的方法？</h4><p>drop view emp_view;</p>
<p>注意：只有DQL语句可以view的形式创建</p>
<h4 id="有了视图可以做什么？"><a href="#有了视图可以做什么？" class="headerlink" title="有了视图可以做什么？"></a>有了视图可以做什么？</h4><p>对视图进行增删改查会导致原表被操作，视图是用来简化sql的</p>
<p>将常用的sql语句，用view保存起来。retrive（检索） CRUD</p>
<p>DBA 授权语句</p>
<p>导入导出命令</p>
<p>​	导出Dos下使用： mysqldump mybase &gt;C:\mybase.sql -uroot -pwhy123456</p>
<p>​	导入：source   要在库内</p>
<p>三范式</p>
<p>第一范式：每个表都要有主键，并且每一个字段都要有原子性 不可再分； 比如电话号码和邮箱地址要分为两个</p>
<p>第二范式：建立在第一范式的基础上，要求所有非主键字段完全依赖主键 不要依赖部分主键。一个表只写一个对象的内容，要解耦合。使用<em>三张表表示多对多的关系 如：教师表 学生表 和教师学生关系表</em>   单一主键满足完全依赖</p>
<h2 id="多对多-三张表-关系表两个外键"><a href="#多对多-三张表-关系表两个外键" class="headerlink" title="多对多 三张表 关系表两个外键"></a>多对多 三张表 关系表两个外键</h2><p>第三范式：建立在第二范式的基础上，要求使用的非主键字段必须直接依赖主键，不能传递依赖</p>
<h2 id="一对多-两张表-多的表加外键"><a href="#一对多-两张表-多的表加外键" class="headerlink" title="一对多 两张表  多的表加外键"></a>一对多 两张表  多的表加外键</h2><p>一对一有时候要拆分表 一对一 外键唯一</p>
<h2 id="for-updata-行级锁-又叫-悲观锁-不许别的线程修改select的行记录"><a href="#for-updata-行级锁-又叫-悲观锁-不许别的线程修改select的行记录" class="headerlink" title="for updata; 行级锁 又叫 悲观锁 不许别的线程修改select的行记录"></a>for updata; 行级锁 又叫 悲观锁 不许别的线程修改select的行记录</h2><p>乐观锁支持多线程 悲观锁不支持多线程 </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/05/21/databaseLearn/">http://example.com/2024/05/21/databaseLearn/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/05/21/docker/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2024/05/21/computer_Network/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">John Doe</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">17</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-sql%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">#1.sql的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%80%93-%E5%88%97%E7%9A%84%E5%88%AB%E5%90%8D"><span class="toc-number">2.</span> <span class="toc-text">– 列的别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">条件格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">14 模糊查询：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E6%8E%92%E5%BA%8F%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">15 排序：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E6%9D%A1%E4%BB%B6%E5%8A%A0%E6%8E%92%E5%BA%8F%E7%9A%84%E7%BB%BC%E5%90%88%E5%A4%84%E7%90%86%EF%BC%9A"><span class="toc-number">6.</span> <span class="toc-text">16 条件加排序的综合处理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">17 数据处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">8.</span> <span class="toc-text">18 分组函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#19-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number"></span> <span class="toc-text">19 分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E7%82%B9%E7%BB%93%E8%AE%BA%EF%BC%9A"><span class="toc-number">0.1.</span> <span class="toc-text">重点结论：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-distinct"><span class="toc-number">1.</span> <span class="toc-text">20 distinct</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.</span> <span class="toc-text">21 连接查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Innerjoin"><span class="toc-number">3.</span> <span class="toc-text">Innerjoin</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">外连接：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-9-%E5%A4%9A%E8%A1%A8%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5"><span class="toc-number">5.</span> <span class="toc-text">2.9 多表如何连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.</span> <span class="toc-text">22子查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E9%9B%86"><span class="toc-number">7.</span> <span class="toc-text">23 合并查询结果集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81limit"><span class="toc-number">7.1.</span> <span class="toc-text">5、limit</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit-start-length"><span class="toc-number">8.</span> <span class="toc-text">limit start, length;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E5%BB%BA%E8%A1%A8%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">23 建表的语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%EF%BC%9Aupdate"><span class="toc-number">9.1.</span> <span class="toc-text">修改：update</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update-emp-set-ename-%E2%80%98wanghaoyang%E2%80%99-where-ename-%E2%80%98king%E2%80%99"><span class="toc-number">10.</span> <span class="toc-text">&amp;update&amp;  emp  &amp;set&amp;  ename &#x3D; ‘wanghaoyang’  &amp;where&amp; ename &#x3D; ‘king’;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E5%88%A0%E9%99%A4%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">11.</span> <span class="toc-text">24 删除的语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25%E5%AF%B9%E8%A1%A8%E7%BB%93%E6%9E%84%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9-%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BD%BF%E7%94%A8sqlyog"><span class="toc-number">12.</span> <span class="toc-text">25对表结构的增删查改 可以使用使用sqlyog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E5%8A%A0%E5%85%A5%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">13.</span> <span class="toc-text">26 创建表的时候加入约束：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%8F%92%E6%9B%B2"><span class="toc-number">13.1.</span> <span class="toc-text">小插曲</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#27-%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number"></span> <span class="toc-text">27 主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#28-%E5%A4%96%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">28 外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">2.</span> <span class="toc-text">29 存储引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#30-%E4%BA%8B%E5%8A%A1%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">30 事务：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">4.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E6%95%88%E4%B8%80"><span class="toc-number">4.0.1.</span> <span class="toc-text">失效一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E6%95%88%E4%BA%8C"><span class="toc-number">4.0.2.</span> <span class="toc-text">失效二</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E6%95%88%E4%B8%89"><span class="toc-number">4.0.3.</span> <span class="toc-text">失效三</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E6%95%88%E5%9B%9B"><span class="toc-number">4.0.4.</span> <span class="toc-text">失效四</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%B1%E6%95%88%E4%BA%94"><span class="toc-number">4.0.5.</span> <span class="toc-text">失效五</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">4.1.</span> <span class="toc-text">索引的分类：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE-view"><span class="toc-number"></span> <span class="toc-text">视图(view)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">0.0.1.</span> <span class="toc-text">创建视图对象的方法？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">0.0.2.</span> <span class="toc-text">删除视图对象的方法？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E4%BA%86%E8%A7%86%E5%9B%BE%E5%8F%AF%E4%BB%A5%E5%81%9A%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">0.0.3.</span> <span class="toc-text">有了视图可以做什么？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A-%E4%B8%89%E5%BC%A0%E8%A1%A8-%E5%85%B3%E7%B3%BB%E8%A1%A8%E4%B8%A4%E4%B8%AA%E5%A4%96%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">多对多 三张表 关系表两个外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A-%E4%B8%A4%E5%BC%A0%E8%A1%A8-%E5%A4%9A%E7%9A%84%E8%A1%A8%E5%8A%A0%E5%A4%96%E9%94%AE"><span class="toc-number">2.</span> <span class="toc-text">一对多 两张表  多的表加外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for-updata-%E8%A1%8C%E7%BA%A7%E9%94%81-%E5%8F%88%E5%8F%AB-%E6%82%B2%E8%A7%82%E9%94%81-%E4%B8%8D%E8%AE%B8%E5%88%AB%E7%9A%84%E7%BA%BF%E7%A8%8B%E4%BF%AE%E6%94%B9select%E7%9A%84%E8%A1%8C%E8%AE%B0%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">for updata; 行级锁 又叫 悲观锁 不许别的线程修改select的行记录</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/SpringMVCLearn/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.699Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/springcloud/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.647Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/Springboot/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.627Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/Shell/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.608Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/21/servletLearn/" title="Untitled">Untitled</a><time datetime="2024-05-21T01:55:54.589Z" title="Created 2024-05-21 09:55:54">2024-05-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By John Doe</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>